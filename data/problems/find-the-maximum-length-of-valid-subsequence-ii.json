{
  "id": "3202",
  "title": "Find the Maximum Length of Valid Subsequence II",
  "slug": "find-the-maximum-length-of-valid-subsequence-ii",
  "difficulty": "Medium",
  "category": "Algorithms",
  "content_html": "You are given an integer array <code>nums</code> and a <strong>positive</strong> integer <code>k</code>.\n<p>A <span data-keyword=\"subsequence-array\">subsequence</span> <code>sub</code> of <code>nums</code> with length <code>x</code> is called <strong>valid</strong> if it satisfies:</p>\n\n<ul>\n\t<li><code>(sub[0] + sub[1]) % k == (sub[1] + sub[2]) % k == ... == (sub[x - 2] + sub[x - 1]) % k.</code></li>\n</ul>\nReturn the length of the <strong>longest</strong> <strong>valid</strong> subsequence of <code>nums</code>.\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">nums = [1,2,3,4,5], k = 2</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">5</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The longest valid subsequence is <code>[1, 2, 3, 4, 5]</code>.</p>\n</div>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">nums = [1,4,2,3,1,4], k = 3</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">4</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The longest valid subsequence is <code>[1, 4, 1, 4]</code>.</p>\n</div>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>2 &lt;= nums.length &lt;= 10<sup>3</sup></code></li>\n\t<li><code>1 &lt;= nums[i] &lt;= 10<sup>7</sup></code></li>\n\t<li><code>1 &lt;= k &lt;= 10<sup>3</sup></code></li>\n</ul>\n",
  "content_markdown": "You are given an integer array `nums` and a **positive** integer `k`. \n\nA subsequence `sub` of `nums` with length `x` is called **valid** if it satisfies:\n\n  * `(sub[0] + sub[1]) % k == (sub[1] + sub[2]) % k == ... == (sub[x - 2] + sub[x - 1]) % k.`\n\nReturn the length of the **longest** **valid** subsequence of `nums`. \n\n \n\n**Example 1:**\n\n**Input:** nums = [1,2,3,4,5], k = 2\n\n**Output:** 5\n\n**Explanation:**\n\nThe longest valid subsequence is `[1, 2, 3, 4, 5]`.\n\n**Example 2:**\n\n**Input:** nums = [1,4,2,3,1,4], k = 3\n\n**Output:** 4\n\n**Explanation:**\n\nThe longest valid subsequence is `[1, 4, 1, 4]`.\n\n \n\n**Constraints:**\n\n  * `2 <= nums.length <= 103`\n  * `1 <= nums[i] <= 107`\n  * `1 <= k <= 103`",
  "question": "You are given an integer array `nums` and a **positive** integer `k`. \n\nA subsequence `sub` of `nums` with length `x` is called **valid** if it satisfies:\n\n  * `(sub[0] + sub[1]) % k == (sub[1] + sub[2]) % k == ... == (sub[x - 2] + sub[x - 1]) % k.`\n\nReturn the length of the **longest** **valid** subsequence of `nums`.",
  "examples": "**Example 1:**\n\n**Input:** nums = [1,2,3,4,5], k = 2\n\n**Output:** 5\n\n**Explanation:**\n\nThe longest valid subsequence is `[1, 2, 3, 4, 5]`.\n\n**Example 2:**\n\n**Input:** nums = [1,4,2,3,1,4], k = 3\n\n**Output:** 4\n\n**Explanation:**\n\nThe longest valid subsequence is `[1, 4, 1, 4]`.",
  "constraints": "**Constraints:**\n\n  * `2 <= nums.length <= 103`\n  * `1 <= nums[i] <= 107`\n  * `1 <= k <= 103`",
  "topics": ["Array", "Dynamic Programming"],
  "total_accepted": 101622,
  "total_submissions": 177538,
  "acceptance_rate": "57.2%",
  "similar_questions": [
    {
      "title": "Longest Increasing Subsequence",
      "slug": "longest-increasing-subsequence",
      "difficulty": "Medium",
      "url": "https://leetcode.com/problems/longest-increasing-subsequence/"
    },
    {
      "title": "Length of the Longest Subsequence That Sums to Target",
      "slug": "length-of-the-longest-subsequence-that-sums-to-target",
      "difficulty": "Medium",
      "url": "https://leetcode.com/problems/length-of-the-longest-subsequence-that-sums-to-target/"
    }
  ],
  "hints": [
    "Fix the value of <code>(subs[0] + subs[1]) % k</code> from the <code>k</code> possible values. Let it be <code>val</code>.",
    "Let <code>dp[i]</code> store the maximum length of a subsequence with its last element <code>x</code> such that <code>x % k == i</code>.",
    "Answer for a subsequence ending at index <code>y</code> is <code>dp[(k + val - (y % k)) % k] + 1</code>."
  ]
}
