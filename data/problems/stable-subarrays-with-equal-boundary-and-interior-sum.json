{
  "id": "3728",
  "title": "Stable Subarrays With Equal Boundary and Interior Sum",
  "slug": "stable-subarrays-with-equal-boundary-and-interior-sum",
  "difficulty": "Medium",
  "category": "Algorithms",
  "content_html": "<p>You are given an integer array <code>capacity</code>.</p>\n\n<p>A <span data-keyword=\"subarray-nonempty\">subarray</span> <code>capacity[l..r]</code> is considered <strong>stable</strong> if:</p>\n\n<ul>\n\t<li>Its length is <strong>at least</strong> 3.</li>\n\t<li>The <strong>first</strong> and <strong>last</strong> elements are each equal to the <strong>sum</strong> of all elements <strong>strictly between</strong> them (i.e., <code>capacity[l] = capacity[r] = capacity[l + 1] + capacity[l + 2] + ... + capacity[r - 1]</code>).</li>\n</ul>\n\n<p>Return an integer denoting the number of <strong>stable subarrays</strong>.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">capacity = [9,3,3,3,9]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">2</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li><code>[9,3,3,3,9]</code> is stable because the first and last elements are both 9, and the sum of the elements strictly between them is <code>3 + 3 + 3 = 9</code>.</li>\n\t<li><code>[3,3,3]</code> is stable because the first and last elements are both 3, and the sum of the elements strictly between them is 3.</li>\n</ul>\n</div>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">capacity = [1,2,3,4,5]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">0</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>No subarray of length at least 3 has equal first and last elements, so the answer is 0.</p>\n</div>\n\n<p><strong class=\"example\">Example 3:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">capacity = [-4,4,0,0,-8,-4]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">1</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><code>[-4,4,0,0,-8,-4]</code> is stable because the first and last elements are both -4, and the sum of the elements strictly between them is <code>4 + 0 + 0 + (-8) = -4</code></p>\n</div>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>3 &lt;= capacity.length &lt;= 10<sup>5</sup></code></li>\n\t<li><code>-10<sup>9</sup> &lt;= capacity[i] &lt;= 10<sup>9</sup></code></li>\n</ul>\n",
  "content_markdown": "You are given an integer array `capacity`.\n\nA subarray `capacity[l..r]` is considered **stable** if:\n\n  * Its length is **at least** 3.\n  * The **first** and **last** elements are each equal to the **sum** of all elements **strictly between** them (i.e., `capacity[l] = capacity[r] = capacity[l + 1] + capacity[l + 2] + ... + capacity[r - 1]`).\n\n\n\nReturn an integer denoting the number of **stable subarrays**.\n\n \n\n**Example 1:**\n\n**Input:** capacity = [9,3,3,3,9]\n\n**Output:** 2\n\n**Explanation:**\n\n  * `[9,3,3,3,9]` is stable because the first and last elements are both 9, and the sum of the elements strictly between them is `3 + 3 + 3 = 9`.\n  * `[3,3,3]` is stable because the first and last elements are both 3, and the sum of the elements strictly between them is 3.\n\n\n\n**Example 2:**\n\n**Input:** capacity = [1,2,3,4,5]\n\n**Output:** 0\n\n**Explanation:**\n\nNo subarray of length at least 3 has equal first and last elements, so the answer is 0.\n\n**Example 3:**\n\n**Input:** capacity = [-4,4,0,0,-8,-4]\n\n**Output:** 1\n\n**Explanation:**\n\n`[-4,4,0,0,-8,-4]` is stable because the first and last elements are both -4, and the sum of the elements strictly between them is `4 + 0 + 0 + (-8) = -4`\n\n \n\n**Constraints:**\n\n  * `3 <= capacity.length <= 105`\n  * `-109 <= capacity[i] <= 109`",
  "question": "You are given an integer array `capacity`.\n\nA subarray `capacity[l..r]` is considered **stable** if:\n\n  * Its length is **at least** 3.\n  * The **first** and **last** elements are each equal to the **sum** of all elements **strictly between** them (i.e., `capacity[l] = capacity[r] = capacity[l + 1] + capacity[l + 2] + ... + capacity[r - 1]`).\n\n\n\nReturn an integer denoting the number of **stable subarrays**.",
  "examples": "**Example 1:**\n\n**Input:** capacity = [9,3,3,3,9]\n\n**Output:** 2\n\n**Explanation:**\n\n  * `[9,3,3,3,9]` is stable because the first and last elements are both 9, and the sum of the elements strictly between them is `3 + 3 + 3 = 9`.\n  * `[3,3,3]` is stable because the first and last elements are both 3, and the sum of the elements strictly between them is 3.\n\n\n\n**Example 2:**\n\n**Input:** capacity = [1,2,3,4,5]\n\n**Output:** 0\n\n**Explanation:**\n\nNo subarray of length at least 3 has equal first and last elements, so the answer is 0.\n\n**Example 3:**\n\n**Input:** capacity = [-4,4,0,0,-8,-4]\n\n**Output:** 1\n\n**Explanation:**\n\n`[-4,4,0,0,-8,-4]` is stable because the first and last elements are both -4, and the sum of the elements strictly between them is `4 + 0 + 0 + (-8) = -4`",
  "constraints": "**Constraints:**\n\n  * `3 <= capacity.length <= 105`\n  * `-109 <= capacity[i] <= 109`",
  "topics": ["Array", "Hash Table", "Prefix Sum"],
  "total_accepted": 15629,
  "total_submissions": 60256,
  "acceptance_rate": "25.9%",
  "similar_questions": [],
  "hints": [
    "Use prefix sums",
    "Let the prefix sum array be <code>p</code>; notice that for a stable range <code>[l, r]</code>, the condition becomes <code>p[r - 1] - p[l] == a[r]</code> and <code>a[l] == a[r]</code>",
    "For each index <code>r</code>, you want to count the number of previous indices <code>l</code> such that <code>p[l] == p[r - 1] - a[r]</code> and <code>a[l] == a[r]</code>",
    "You can do this efficiently by maintaining a map from <code>(a[i], p[i])</code> to a frequency count as you iterate"
  ]
}
