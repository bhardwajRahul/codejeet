{
  "id": "980",
  "title": "Unique Paths III",
  "slug": "unique-paths-iii",
  "difficulty": "Hard",
  "category": "Algorithms",
  "content_html": "<p>You are given an <code>m x n</code> integer array <code>grid</code> where <code>grid[i][j]</code> could be:</p>\n\n<ul>\n\t<li><code>1</code> representing the starting square. There is exactly one starting square.</li>\n\t<li><code>2</code> representing the ending square. There is exactly one ending square.</li>\n\t<li><code>0</code> representing empty squares we can walk over.</li>\n\t<li><code>-1</code> representing obstacles that we cannot walk over.</li>\n</ul>\n\n<p>Return <em>the number of 4-directional walks from the starting square to the ending square, that walk over every non-obstacle square exactly once</em>.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n<img alt=\"\" src=\"https://assets.leetcode.com/uploads/2021/08/02/lc-unique1.jpg\" style=\"width: 324px; height: 245px;\" />\n<pre>\n<strong>Input:</strong> grid = [[1,0,0,0],[0,0,0,0],[0,0,2,-1]]\n<strong>Output:</strong> 2\n<strong>Explanation:</strong> We have the following two paths: \n1. (0,0),(0,1),(0,2),(0,3),(1,3),(1,2),(1,1),(1,0),(2,0),(2,1),(2,2)\n2. (0,0),(1,0),(2,0),(2,1),(1,1),(0,1),(0,2),(0,3),(1,3),(1,2),(2,2)\n</pre>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n<img alt=\"\" src=\"https://assets.leetcode.com/uploads/2021/08/02/lc-unique2.jpg\" style=\"width: 324px; height: 245px;\" />\n<pre>\n<strong>Input:</strong> grid = [[1,0,0,0],[0,0,0,0],[0,0,0,2]]\n<strong>Output:</strong> 4\n<strong>Explanation:</strong> We have the following four paths: \n1. (0,0),(0,1),(0,2),(0,3),(1,3),(1,2),(1,1),(1,0),(2,0),(2,1),(2,2),(2,3)\n2. (0,0),(0,1),(1,1),(1,0),(2,0),(2,1),(2,2),(1,2),(0,2),(0,3),(1,3),(2,3)\n3. (0,0),(1,0),(2,0),(2,1),(2,2),(1,2),(1,1),(0,1),(0,2),(0,3),(1,3),(2,3)\n4. (0,0),(1,0),(2,0),(2,1),(1,1),(0,1),(0,2),(0,3),(1,3),(1,2),(2,2),(2,3)\n</pre>\n\n<p><strong class=\"example\">Example 3:</strong></p>\n<img alt=\"\" src=\"https://assets.leetcode.com/uploads/2021/08/02/lc-unique3-.jpg\" style=\"width: 164px; height: 165px;\" />\n<pre>\n<strong>Input:</strong> grid = [[0,1],[2,0]]\n<strong>Output:</strong> 0\n<strong>Explanation:</strong> There is no path that walks over every empty square exactly once.\nNote that the starting and ending square can be anywhere in the grid.\n</pre>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>m == grid.length</code></li>\n\t<li><code>n == grid[i].length</code></li>\n\t<li><code>1 &lt;= m, n &lt;= 20</code></li>\n\t<li><code>1 &lt;= m * n &lt;= 20</code></li>\n\t<li><code>-1 &lt;= grid[i][j] &lt;= 2</code></li>\n\t<li>There is exactly one starting cell and one ending cell.</li>\n</ul>\n",
  "content_markdown": "You are given an `m x n` integer array `grid` where `grid[i][j]` could be:\n\n  * `1` representing the starting square. There is exactly one starting square.\n  * `2` representing the ending square. There is exactly one ending square.\n  * `0` representing empty squares we can walk over.\n  * `-1` representing obstacles that we cannot walk over.\n\n\n\nReturn _the number of 4-directional walks from the starting square to the ending square, that walk over every non-obstacle square exactly once_.\n\n \n\n**Example 1:**\n\n![](https://assets.leetcode.com/uploads/2021/08/02/lc-unique1.jpg)\n    \n    \n    **Input:** grid = [[1,0,0,0],[0,0,0,0],[0,0,2,-1]]\n    **Output:** 2\n    **Explanation:** We have the following two paths: \n    1. (0,0),(0,1),(0,2),(0,3),(1,3),(1,2),(1,1),(1,0),(2,0),(2,1),(2,2)\n    2. (0,0),(1,0),(2,0),(2,1),(1,1),(0,1),(0,2),(0,3),(1,3),(1,2),(2,2)\n    \n\n**Example 2:**\n\n![](https://assets.leetcode.com/uploads/2021/08/02/lc-unique2.jpg)\n    \n    \n    **Input:** grid = [[1,0,0,0],[0,0,0,0],[0,0,0,2]]\n    **Output:** 4\n    **Explanation:** We have the following four paths: \n    1. (0,0),(0,1),(0,2),(0,3),(1,3),(1,2),(1,1),(1,0),(2,0),(2,1),(2,2),(2,3)\n    2. (0,0),(0,1),(1,1),(1,0),(2,0),(2,1),(2,2),(1,2),(0,2),(0,3),(1,3),(2,3)\n    3. (0,0),(1,0),(2,0),(2,1),(2,2),(1,2),(1,1),(0,1),(0,2),(0,3),(1,3),(2,3)\n    4. (0,0),(1,0),(2,0),(2,1),(1,1),(0,1),(0,2),(0,3),(1,3),(1,2),(2,2),(2,3)\n    \n\n**Example 3:**\n\n![](https://assets.leetcode.com/uploads/2021/08/02/lc-unique3-.jpg)\n    \n    \n    **Input:** grid = [[0,1],[2,0]]\n    **Output:** 0\n    **Explanation:** There is no path that walks over every empty square exactly once.\n    Note that the starting and ending square can be anywhere in the grid.\n    \n\n \n\n**Constraints:**\n\n  * `m == grid.length`\n  * `n == grid[i].length`\n  * `1 <= m, n <= 20`\n  * `1 <= m * n <= 20`\n  * `-1 <= grid[i][j] <= 2`\n  * There is exactly one starting cell and one ending cell.",
  "question": "You are given an `m x n` integer array `grid` where `grid[i][j]` could be:\n\n  * `1` representing the starting square. There is exactly one starting square.\n  * `2` representing the ending square. There is exactly one ending square.\n  * `0` representing empty squares we can walk over.\n  * `-1` representing obstacles that we cannot walk over.\n\n\n\nReturn _the number of 4-directional walks from the starting square to the ending square, that walk over every non-obstacle square exactly once_.",
  "examples": "**Example 1:**\n\n![](https://assets.leetcode.com/uploads/2021/08/02/lc-unique1.jpg)\n    \n    \n    **Input:** grid = [[1,0,0,0],[0,0,0,0],[0,0,2,-1]]\n    **Output:** 2\n    **Explanation:** We have the following two paths: \n    1. (0,0),(0,1),(0,2),(0,3),(1,3),(1,2),(1,1),(1,0),(2,0),(2,1),(2,2)\n    2. (0,0),(1,0),(2,0),(2,1),(1,1),(0,1),(0,2),(0,3),(1,3),(1,2),(2,2)\n    \n\n**Example 2:**\n\n![](https://assets.leetcode.com/uploads/2021/08/02/lc-unique2.jpg)\n    \n    \n    **Input:** grid = [[1,0,0,0],[0,0,0,0],[0,0,0,2]]\n    **Output:** 4\n    **Explanation:** We have the following four paths: \n    1. (0,0),(0,1),(0,2),(0,3),(1,3),(1,2),(1,1),(1,0),(2,0),(2,1),(2,2),(2,3)\n    2. (0,0),(0,1),(1,1),(1,0),(2,0),(2,1),(2,2),(1,2),(0,2),(0,3),(1,3),(2,3)\n    3. (0,0),(1,0),(2,0),(2,1),(2,2),(1,2),(1,1),(0,1),(0,2),(0,3),(1,3),(2,3)\n    4. (0,0),(1,0),(2,0),(2,1),(1,1),(0,1),(0,2),(0,3),(1,3),(1,2),(2,2),(2,3)\n    \n\n**Example 3:**\n\n![](https://assets.leetcode.com/uploads/2021/08/02/lc-unique3-.jpg)\n    \n    \n    **Input:** grid = [[0,1],[2,0]]\n    **Output:** 0\n    **Explanation:** There is no path that walks over every empty square exactly once.\n    Note that the starting and ending square can be anywhere in the grid.",
  "constraints": "**Constraints:**\n\n  * `m == grid.length`\n  * `n == grid[i].length`\n  * `1 <= m, n <= 20`\n  * `1 <= m * n <= 20`\n  * `-1 <= grid[i][j] <= 2`\n  * There is exactly one starting cell and one ending cell.",
  "topics": ["Array", "Backtracking", "Bit Manipulation", "Matrix"],
  "total_accepted": 254434,
  "total_submissions": 307460,
  "acceptance_rate": "82.8%",
  "similar_questions": [
    {
      "title": "Sudoku Solver",
      "slug": "sudoku-solver",
      "difficulty": "Hard",
      "url": "https://leetcode.com/problems/sudoku-solver/"
    },
    {
      "title": "Unique Paths II",
      "slug": "unique-paths-ii",
      "difficulty": "Medium",
      "url": "https://leetcode.com/problems/unique-paths-ii/"
    },
    {
      "title": "Word Search II",
      "slug": "word-search-ii",
      "difficulty": "Hard",
      "url": "https://leetcode.com/problems/word-search-ii/"
    }
  ],
  "hints": []
}
