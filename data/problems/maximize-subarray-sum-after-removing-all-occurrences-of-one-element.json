{
  "id": "3410",
  "title": "Maximize Subarray Sum After Removing All Occurrences of One Element",
  "slug": "maximize-subarray-sum-after-removing-all-occurrences-of-one-element",
  "difficulty": "Hard",
  "category": "Algorithms",
  "content_html": "<p>You are given an integer array <code>nums</code>.</p>\n\n<p>You can do the following operation on the array <strong>at most</strong> once:</p>\n\n<ul>\n\t<li>Choose <strong>any</strong> integer <code>x</code> such that <code>nums</code> remains <strong>non-empty</strong> on removing all occurrences of <code>x</code>.</li>\n\t<li>Remove&nbsp;<strong>all</strong> occurrences of <code>x</code> from the array.</li>\n</ul>\n\n<p>Return the <strong>maximum</strong> <span data-keyword=\"subarray-nonempty\">subarray</span> sum across <strong>all</strong> possible resulting arrays.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">nums = [-3,2,-2,-1,3,-2,3]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">7</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>We can have the following arrays after at most one operation:</p>\n\n<ul>\n\t<li>The original array is <code>nums = [<span class=\"example-io\">-3, 2, -2, -1, <u><strong>3, -2, 3</strong></u></span>]</code>. The maximum subarray sum is <code>3 + (-2) + 3 = 4</code>.</li>\n\t<li>Deleting all occurences of <code>x = -3</code> results in <code>nums = [2, -2, -1, <strong><u><span class=\"example-io\">3, -2, 3</span></u></strong>]</code>. The maximum subarray sum is <code>3 + (-2) + 3 = 4</code>.</li>\n\t<li>Deleting all occurences of <code>x = -2</code> results in <code>nums = [<span class=\"example-io\">-3, <strong><u>2, -1, 3, 3</u></strong></span>]</code>. The maximum subarray sum is <code>2 + (-1) + 3 + 3 = 7</code>.</li>\n\t<li>Deleting all occurences of <code>x = -1</code> results in <code>nums = [<span class=\"example-io\">-3, 2, -2, <strong><u>3, -2, 3</u></strong></span>]</code>. The maximum subarray sum is <code>3 + (-2) + 3 = 4</code>.</li>\n\t<li>Deleting all occurences of <code>x = 3</code> results in <code>nums = [<span class=\"example-io\">-3, <u><strong>2</strong></u>, -2, -1, -2</span>]</code>. The maximum subarray sum is 2.</li>\n</ul>\n\n<p>The output is <code>max(4, 4, 7, 4, 2) = 7</code>.</p>\n</div>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">nums = [1,2,3,4]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">10</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>It is optimal to not perform any operations.</p>\n</div>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= nums.length &lt;= 10<sup>5</sup></code></li>\n\t<li><code>-10<sup>6</sup> &lt;= nums[i] &lt;= 10<sup>6</sup></code></li>\n</ul>\n",
  "content_markdown": "You are given an integer array `nums`.\n\nYou can do the following operation on the array **at most** once:\n\n  * Choose **any** integer `x` such that `nums` remains **non-empty** on removing all occurrences of `x`.\n  * Remove **all** occurrences of `x` from the array.\n\n\n\nReturn the **maximum** subarray sum across **all** possible resulting arrays.\n\n \n\n**Example 1:**\n\n**Input:** nums = [-3,2,-2,-1,3,-2,3]\n\n**Output:** 7\n\n**Explanation:**\n\nWe can have the following arrays after at most one operation:\n\n  * The original array is `nums = [-3, 2, -2, -1, _**3, -2, 3**_]`. The maximum subarray sum is `3 + (-2) + 3 = 4`.\n  * Deleting all occurences of `x = -3` results in `nums = [2, -2, -1, **_3, -2, 3_**]`. The maximum subarray sum is `3 + (-2) + 3 = 4`.\n  * Deleting all occurences of `x = -2` results in `nums = [-3, **_2, -1, 3, 3_**]`. The maximum subarray sum is `2 + (-1) + 3 + 3 = 7`.\n  * Deleting all occurences of `x = -1` results in `nums = [-3, 2, -2, **_3, -2, 3_**]`. The maximum subarray sum is `3 + (-2) + 3 = 4`.\n  * Deleting all occurences of `x = 3` results in `nums = [-3, _**2**_ , -2, -1, -2]`. The maximum subarray sum is 2.\n\n\n\nThe output is `max(4, 4, 7, 4, 2) = 7`.\n\n**Example 2:**\n\n**Input:** nums = [1,2,3,4]\n\n**Output:** 10\n\n**Explanation:**\n\nIt is optimal to not perform any operations.\n\n \n\n**Constraints:**\n\n  * `1 <= nums.length <= 105`\n  * `-106 <= nums[i] <= 106`",
  "question": "You are given an integer array `nums`.\n\nYou can do the following operation on the array **at most** once:\n\n  * Choose **any** integer `x` such that `nums` remains **non-empty** on removing all occurrences of `x`.\n  * Remove **all** occurrences of `x` from the array.\n\n\n\nReturn the **maximum** subarray sum across **all** possible resulting arrays.",
  "examples": "**Example 1:**\n\n**Input:** nums = [-3,2,-2,-1,3,-2,3]\n\n**Output:** 7\n\n**Explanation:**\n\nWe can have the following arrays after at most one operation:\n\n  * The original array is `nums = [-3, 2, -2, -1, _**3, -2, 3**_]`. The maximum subarray sum is `3 + (-2) + 3 = 4`.\n  * Deleting all occurences of `x = -3` results in `nums = [2, -2, -1, **_3, -2, 3_**]`. The maximum subarray sum is `3 + (-2) + 3 = 4`.\n  * Deleting all occurences of `x = -2` results in `nums = [-3, **_2, -1, 3, 3_**]`. The maximum subarray sum is `2 + (-1) + 3 + 3 = 7`.\n  * Deleting all occurences of `x = -1` results in `nums = [-3, 2, -2, **_3, -2, 3_**]`. The maximum subarray sum is `3 + (-2) + 3 = 4`.\n  * Deleting all occurences of `x = 3` results in `nums = [-3, _**2**_ , -2, -1, -2]`. The maximum subarray sum is 2.\n\n\n\nThe output is `max(4, 4, 7, 4, 2) = 7`.\n\n**Example 2:**\n\n**Input:** nums = [1,2,3,4]\n\n**Output:** 10\n\n**Explanation:**\n\nIt is optimal to not perform any operations.",
  "constraints": "**Constraints:**\n\n  * `1 <= nums.length <= 105`\n  * `-106 <= nums[i] <= 106`",
  "topics": ["Array", "Dynamic Programming", "Segment Tree"],
  "total_accepted": 4016,
  "total_submissions": 17499,
  "acceptance_rate": "22.9%",
  "similar_questions": [
    {
      "title": "Maximum Subarray",
      "slug": "maximum-subarray",
      "difficulty": "Medium",
      "url": "https://leetcode.com/problems/maximum-subarray/"
    },
    {
      "title": "Maximum Subarray Sum with One Deletion",
      "slug": "maximum-subarray-sum-with-one-deletion",
      "difficulty": "Medium",
      "url": "https://leetcode.com/problems/maximum-subarray-sum-with-one-deletion/"
    }
  ],
  "hints": [
    "Use a segment tree data structure to solve the problem.",
    "Each node of the segment tree should store the subarray sum, the maximum subarray sum, the maximum prefix sum, and the maximum suffix sum within the subarray defined by that node."
  ]
}
