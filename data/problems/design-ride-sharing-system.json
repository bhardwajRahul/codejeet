{
  "id": "3829",
  "title": "Design Ride Sharing System",
  "slug": "design-ride-sharing-system",
  "difficulty": "Medium",
  "category": "Algorithms",
  "content_html": "<p>A ride sharing system manages ride requests from riders and availability from drivers. Riders request rides, and drivers become available over time. The system should match riders and drivers in the order they arrive.</p>\n\n<p>Implement the <code>RideSharingSystem</code> class:</p>\n\n<ul>\n\t<li><code>RideSharingSystem()</code> Initializes the system.</li>\n\t<li><code>void addRider(int riderId)</code> Adds a new rider with the given <code>riderId</code>.</li>\n\t<li><code>void addDriver(int driverId)</code> Adds a new driver with the given <code>driverId</code>.</li>\n\t<li><code>int[] matchDriverWithRider()</code> Matches the <strong>earliest</strong> available driver with the <strong>earliest</strong> waiting rider and removes both of them from the system. Returns an integer array of size 2 where <code>result = [driverId, riderId]</code> if a match is made. If no match is available, returns <code>[-1, -1]</code>.</li>\n\t<li><code>void cancelRider(int riderId)</code> Cancels the ride request of the rider with the given <code>riderId</code> <strong>if the rider exists</strong> and has <strong>not</strong> yet been matched.</li>\n</ul>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong><br />\n<span class=\"example-io\">[&quot;RideSharingSystem&quot;, &quot;addRider&quot;, &quot;addDriver&quot;, &quot;addRider&quot;, &quot;matchDriverWithRider&quot;, &quot;addDriver&quot;, &quot;cancelRider&quot;, &quot;matchDriverWithRider&quot;, &quot;matchDriverWithRider&quot;]<br />\n[[], [3], [2], [1], [], [5], [3], [], []]</span></p>\n\n<p><strong>Output:</strong><br />\n<span class=\"example-io\">[null, null, null, null, [2, 3], null, null, [5, 1], [-1, -1]] </span></p>\n\n<p><strong>Explanation</strong></p>\nRideSharingSystem rideSharingSystem = new RideSharingSystem(); // Initializes the system<br />\nrideSharingSystem.addRider(3); // rider 3 joins the queue<br />\nrideSharingSystem.addDriver(2); // driver 2 joins the queue<br />\nrideSharingSystem.addRider(1); // rider 1 joins the queue<br />\nrideSharingSystem.matchDriverWithRider(); // returns [2, 3]<br />\nrideSharingSystem.addDriver(5); // driver 5 becomes available<br />\nrideSharingSystem.cancelRider(3); // rider 3 is already matched, cancel has no effect<br />\nrideSharingSystem.matchDriverWithRider(); // returns [5, 1]<br />\nrideSharingSystem.matchDriverWithRider(); // returns [-1, -1]</div>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong><br />\n<span class=\"example-io\">[&quot;RideSharingSystem&quot;, &quot;addRider&quot;, &quot;addDriver&quot;, &quot;addDriver&quot;, &quot;matchDriverWithRider&quot;, &quot;addRider&quot;, &quot;cancelRider&quot;, &quot;matchDriverWithRider&quot;]<br />\n[[], [8], [8], [6], [], [2], [2], []]</span></p>\n\n<p><strong>Output:</strong><br />\n<span class=\"example-io\">[null, null, null, null, [8, 8], null, null, [-1, -1]] </span></p>\n\n<p><strong>Explanation</strong></p>\nRideSharingSystem rideSharingSystem = new RideSharingSystem(); // Initializes the system<br />\nrideSharingSystem.addRider(8); // rider 8 joins the queue<br />\nrideSharingSystem.addDriver(8); // driver 8 joins the queue<br />\nrideSharingSystem.addDriver(6); // driver 6 joins the queue<br />\nrideSharingSystem.matchDriverWithRider(); // returns [8, 8]<br />\nrideSharingSystem.addRider(2); // rider 2 joins the queue<br />\nrideSharingSystem.cancelRider(2); // rider 2 cancels<br />\nrideSharingSystem.matchDriverWithRider(); // returns [-1, -1]</div>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= riderId, driverId &lt;= 1000</code></li>\n\t<li>Each <code>riderId</code> is <strong>unique</strong> among riders and is added at most <strong>once</strong>.</li>\n\t<li>Each <code>driverId</code> is <strong>unique</strong> among drivers and is added at most <strong>once</strong>.</li>\n\t<li>At most 1000 calls will be made in <strong>total</strong> to <code>addRider</code>​​​​​​​, <code>addDriver</code>, <code>matchDriverWithRider</code>, and <code>cancelRider</code>.</li>\n</ul>\n",
  "content_markdown": "A ride sharing system manages ride requests from riders and availability from drivers. Riders request rides, and drivers become available over time. The system should match riders and drivers in the order they arrive.\n\nImplement the `RideSharingSystem` class:\n\n  * `RideSharingSystem()` Initializes the system.\n  * `void addRider(int riderId)` Adds a new rider with the given `riderId`.\n  * `void addDriver(int driverId)` Adds a new driver with the given `driverId`.\n  * `int[] matchDriverWithRider()` Matches the **earliest** available driver with the **earliest** waiting rider and removes both of them from the system. Returns an integer array of size 2 where `result = [driverId, riderId]` if a match is made. If no match is available, returns `[-1, -1]`.\n  * `void cancelRider(int riderId)` Cancels the ride request of the rider with the given `riderId` **if the rider exists** and has **not** yet been matched.\n\n\n\n \n\n**Example 1:**\n\n**Input:**  \n[\"RideSharingSystem\", \"addRider\", \"addDriver\", \"addRider\", \"matchDriverWithRider\", \"addDriver\", \"cancelRider\", \"matchDriverWithRider\", \"matchDriverWithRider\"]  \n[[], [3], [2], [1], [], [5], [3], [], []]\n\n**Output:**  \n[null, null, null, null, [2, 3], null, null, [5, 1], [-1, -1]] \n\n**Explanation**\n\nRideSharingSystem rideSharingSystem = new RideSharingSystem(); // Initializes the system  \nrideSharingSystem.addRider(3); // rider 3 joins the queue  \nrideSharingSystem.addDriver(2); // driver 2 joins the queue  \nrideSharingSystem.addRider(1); // rider 1 joins the queue  \nrideSharingSystem.matchDriverWithRider(); // returns [2, 3]  \nrideSharingSystem.addDriver(5); // driver 5 becomes available  \nrideSharingSystem.cancelRider(3); // rider 3 is already matched, cancel has no effect  \nrideSharingSystem.matchDriverWithRider(); // returns [5, 1]  \nrideSharingSystem.matchDriverWithRider(); // returns [-1, -1]\n\n**Example 2:**\n\n**Input:**  \n[\"RideSharingSystem\", \"addRider\", \"addDriver\", \"addDriver\", \"matchDriverWithRider\", \"addRider\", \"cancelRider\", \"matchDriverWithRider\"]  \n[[], [8], [8], [6], [], [2], [2], []]\n\n**Output:**  \n[null, null, null, null, [8, 8], null, null, [-1, -1]] \n\n**Explanation**\n\nRideSharingSystem rideSharingSystem = new RideSharingSystem(); // Initializes the system  \nrideSharingSystem.addRider(8); // rider 8 joins the queue  \nrideSharingSystem.addDriver(8); // driver 8 joins the queue  \nrideSharingSystem.addDriver(6); // driver 6 joins the queue  \nrideSharingSystem.matchDriverWithRider(); // returns [8, 8]  \nrideSharingSystem.addRider(2); // rider 2 joins the queue  \nrideSharingSystem.cancelRider(2); // rider 2 cancels  \nrideSharingSystem.matchDriverWithRider(); // returns [-1, -1]\n\n \n\n**Constraints:**\n\n  * `1 <= riderId, driverId <= 1000`\n  * Each `riderId` is **unique** among riders and is added at most **once**.\n  * Each `driverId` is **unique** among drivers and is added at most **once**.\n  * At most 1000 calls will be made in **total** to `addRider`​​​​​​​, `addDriver`, `matchDriverWithRider`, and `cancelRider`.",
  "question": "A ride sharing system manages ride requests from riders and availability from drivers. Riders request rides, and drivers become available over time. The system should match riders and drivers in the order they arrive.\n\nImplement the `RideSharingSystem` class:\n\n  * `RideSharingSystem()` Initializes the system.\n  * `void addRider(int riderId)` Adds a new rider with the given `riderId`.\n  * `void addDriver(int driverId)` Adds a new driver with the given `driverId`.\n  * `int[] matchDriverWithRider()` Matches the **earliest** available driver with the **earliest** waiting rider and removes both of them from the system. Returns an integer array of size 2 where `result = [driverId, riderId]` if a match is made. If no match is available, returns `[-1, -1]`.\n  * `void cancelRider(int riderId)` Cancels the ride request of the rider with the given `riderId` **if the rider exists** and has **not** yet been matched.",
  "examples": "**Example 1:**\n\n**Input:**  \n[\"RideSharingSystem\", \"addRider\", \"addDriver\", \"addRider\", \"matchDriverWithRider\", \"addDriver\", \"cancelRider\", \"matchDriverWithRider\", \"matchDriverWithRider\"]  \n[[], [3], [2], [1], [], [5], [3], [], []]\n\n**Output:**  \n[null, null, null, null, [2, 3], null, null, [5, 1], [-1, -1]] \n\n**Explanation**\n\nRideSharingSystem rideSharingSystem = new RideSharingSystem(); // Initializes the system  \nrideSharingSystem.addRider(3); // rider 3 joins the queue  \nrideSharingSystem.addDriver(2); // driver 2 joins the queue  \nrideSharingSystem.addRider(1); // rider 1 joins the queue  \nrideSharingSystem.matchDriverWithRider(); // returns [2, 3]  \nrideSharingSystem.addDriver(5); // driver 5 becomes available  \nrideSharingSystem.cancelRider(3); // rider 3 is already matched, cancel has no effect  \nrideSharingSystem.matchDriverWithRider(); // returns [5, 1]  \nrideSharingSystem.matchDriverWithRider(); // returns [-1, -1]\n\n**Example 2:**\n\n**Input:**  \n[\"RideSharingSystem\", \"addRider\", \"addDriver\", \"addDriver\", \"matchDriverWithRider\", \"addRider\", \"cancelRider\", \"matchDriverWithRider\"]  \n[[], [8], [8], [6], [], [2], [2], []]\n\n**Output:**  \n[null, null, null, null, [8, 8], null, null, [-1, -1]] \n\n**Explanation**\n\nRideSharingSystem rideSharingSystem = new RideSharingSystem(); // Initializes the system  \nrideSharingSystem.addRider(8); // rider 8 joins the queue  \nrideSharingSystem.addDriver(8); // driver 8 joins the queue  \nrideSharingSystem.addDriver(6); // driver 6 joins the queue  \nrideSharingSystem.matchDriverWithRider(); // returns [8, 8]  \nrideSharingSystem.addRider(2); // rider 2 joins the queue  \nrideSharingSystem.cancelRider(2); // rider 2 cancels  \nrideSharingSystem.matchDriverWithRider(); // returns [-1, -1]",
  "constraints": "**Constraints:**\n\n  * `1 <= riderId, driverId <= 1000`\n  * Each `riderId` is **unique** among riders and is added at most **once**.\n  * Each `driverId` is **unique** among drivers and is added at most **once**.\n  * At most 1000 calls will be made in **total** to `addRider`​​​​​​​, `addDriver`, `matchDriverWithRider`, and `cancelRider`.",
  "topics": ["Hash Table", "Design", "Queue", "Data Stream"],
  "total_accepted": 26539,
  "total_submissions": 41914,
  "acceptance_rate": "63.3%",
  "similar_questions": [],
  "hints": [
    "Use queues to preserve FIFO order for riders and drivers.",
    "Track waiting riders with a structure that supports efficient removal on cancel (for example, a list plus a map).",
    "Before matching, skip or remove canceled riders to ensure the earliest valid rider is paired with the earliest driver."
  ]
}
