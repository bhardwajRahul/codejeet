{
  "id": "1719",
  "title": "Number Of Ways To Reconstruct A Tree",
  "slug": "number-of-ways-to-reconstruct-a-tree",
  "difficulty": "Hard",
  "category": "Algorithms",
  "content_html": "<p>You are given an array <code>pairs</code>, where <code>pairs[i] = [x<sub>i</sub>, y<sub>i</sub>]</code>, and:</p>\n\n<ul>\n\t<li>There are no duplicates.</li>\n\t<li><code>x<sub>i</sub> &lt; y<sub>i</sub></code></li>\n</ul>\n\n<p>Let <code>ways</code> be the number of rooted trees that satisfy the following conditions:</p>\n\n<ul>\n\t<li>The tree consists of nodes whose values appeared in <code>pairs</code>.</li>\n\t<li>A pair <code>[x<sub>i</sub>, y<sub>i</sub>]</code> exists in <code>pairs</code> <strong>if and only if</strong> <code>x<sub>i</sub></code> is an ancestor of <code>y<sub>i</sub></code> or <code>y<sub>i</sub></code> is an ancestor of <code>x<sub>i</sub></code>.</li>\n\t<li><strong>Note:</strong> the tree does not have to be a binary tree.</li>\n</ul>\n\n<p>Two ways are considered to be different if there is at least one node that has different parents in both ways.</p>\n\n<p>Return:</p>\n\n<ul>\n\t<li><code>0</code> if <code>ways == 0</code></li>\n\t<li><code>1</code> if <code>ways == 1</code></li>\n\t<li><code>2</code> if <code>ways &gt; 1</code></li>\n</ul>\n\n<p>A <strong>rooted tree</strong> is a tree that has a single root node, and all edges are oriented to be outgoing from the root.</p>\n\n<p>An <strong>ancestor</strong> of a node is any node on the path from the root to that node (excluding the node itself). The root has no ancestors.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n<img src=\"https://assets.leetcode.com/uploads/2020/12/03/trees2.png\" style=\"width: 208px; height: 221px;\" />\n<pre>\n<strong>Input:</strong> pairs = [[1,2],[2,3]]\n<strong>Output:</strong> 1\n<strong>Explanation:</strong> There is exactly one valid rooted tree, which is shown in the above figure.\n</pre>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n<img alt=\"\" src=\"https://assets.leetcode.com/uploads/2020/12/03/tree.png\" style=\"width: 234px; height: 241px;\" />\n<pre>\n<strong>Input:</strong> pairs = [[1,2],[2,3],[1,3]]\n<strong>Output:</strong> 2\n<strong>Explanation:</strong> There are multiple valid rooted trees. Three of them are shown in the above figures.\n</pre>\n\n<p><strong class=\"example\">Example 3:</strong></p>\n\n<pre>\n<strong>Input:</strong> pairs = [[1,2],[2,3],[2,4],[1,5]]\n<strong>Output:</strong> 0\n<strong>Explanation:</strong> There are no valid rooted trees.</pre>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= pairs.length &lt;= 10<sup>5</sup></code></li>\n\t<li><code>1 &lt;= x<sub>i </sub>&lt; y<sub>i</sub> &lt;= 500</code></li>\n\t<li>The elements in <code>pairs</code> are unique.</li>\n</ul>\n",
  "content_markdown": "You are given an array `pairs`, where `pairs[i] = [xi, yi]`, and:\n\n  * There are no duplicates.\n  * `xi < yi`\n\n\n\nLet `ways` be the number of rooted trees that satisfy the following conditions:\n\n  * The tree consists of nodes whose values appeared in `pairs`.\n  * A pair `[xi, yi]` exists in `pairs` **if and only if** `xi` is an ancestor of `yi` or `yi` is an ancestor of `xi`.\n  * **Note:** the tree does not have to be a binary tree.\n\n\n\nTwo ways are considered to be different if there is at least one node that has different parents in both ways.\n\nReturn:\n\n  * `0` if `ways == 0`\n  * `1` if `ways == 1`\n  * `2` if `ways > 1`\n\n\n\nA **rooted tree** is a tree that has a single root node, and all edges are oriented to be outgoing from the root.\n\nAn **ancestor** of a node is any node on the path from the root to that node (excluding the node itself). The root has no ancestors.\n\n \n\n**Example 1:**\n\n![](https://assets.leetcode.com/uploads/2020/12/03/trees2.png)\n    \n    \n    **Input:** pairs = [[1,2],[2,3]]\n    **Output:** 1\n    **Explanation:** There is exactly one valid rooted tree, which is shown in the above figure.\n    \n\n**Example 2:**\n\n![](https://assets.leetcode.com/uploads/2020/12/03/tree.png)\n    \n    \n    **Input:** pairs = [[1,2],[2,3],[1,3]]\n    **Output:** 2\n    **Explanation:** There are multiple valid rooted trees. Three of them are shown in the above figures.\n    \n\n**Example 3:**\n    \n    \n    **Input:** pairs = [[1,2],[2,3],[2,4],[1,5]]\n    **Output:** 0\n    **Explanation:** There are no valid rooted trees.\n\n \n\n**Constraints:**\n\n  * `1 <= pairs.length <= 105`\n  * `1 <= xi < yi <= 500`\n  * The elements in `pairs` are unique.",
  "question": "You are given an array `pairs`, where `pairs[i] = [xi, yi]`, and:\n\n  * There are no duplicates.\n  * `xi < yi`\n\n\n\nLet `ways` be the number of rooted trees that satisfy the following conditions:\n\n  * The tree consists of nodes whose values appeared in `pairs`.\n  * A pair `[xi, yi]` exists in `pairs` **if and only if** `xi` is an ancestor of `yi` or `yi` is an ancestor of `xi`.\n  * **Note:** the tree does not have to be a binary tree.\n\n\n\nTwo ways are considered to be different if there is at least one node that has different parents in both ways.\n\nReturn:\n\n  * `0` if `ways == 0`\n  * `1` if `ways == 1`\n  * `2` if `ways > 1`\n\n\n\nA **rooted tree** is a tree that has a single root node, and all edges are oriented to be outgoing from the root.\n\nAn **ancestor** of a node is any node on the path from the root to that node (excluding the node itself). The root has no ancestors.",
  "examples": "**Example 1:**\n\n![](https://assets.leetcode.com/uploads/2020/12/03/trees2.png)\n    \n    \n    **Input:** pairs = [[1,2],[2,3]]\n    **Output:** 1\n    **Explanation:** There is exactly one valid rooted tree, which is shown in the above figure.\n    \n\n**Example 2:**\n\n![](https://assets.leetcode.com/uploads/2020/12/03/tree.png)\n    \n    \n    **Input:** pairs = [[1,2],[2,3],[1,3]]\n    **Output:** 2\n    **Explanation:** There are multiple valid rooted trees. Three of them are shown in the above figures.\n    \n\n**Example 3:**\n    \n    \n    **Input:** pairs = [[1,2],[2,3],[2,4],[1,5]]\n    **Output:** 0\n    **Explanation:** There are no valid rooted trees.",
  "constraints": "**Constraints:**\n\n  * `1 <= pairs.length <= 105`\n  * `1 <= xi < yi <= 500`\n  * The elements in `pairs` are unique.",
  "topics": ["Array", "Hash Table", "Tree", "Graph Theory", "Simulation"],
  "total_accepted": 6635,
  "total_submissions": 14598,
  "acceptance_rate": "45.5%",
  "similar_questions": [
    {
      "title": "Create Binary Tree From Descriptions",
      "slug": "create-binary-tree-from-descriptions",
      "difficulty": "Medium",
      "url": "https://leetcode.com/problems/create-binary-tree-from-descriptions/"
    },
    {
      "title": "Maximum Star Sum of a Graph",
      "slug": "maximum-star-sum-of-a-graph",
      "difficulty": "Medium",
      "url": "https://leetcode.com/problems/maximum-star-sum-of-a-graph/"
    }
  ],
  "hints": [
    "Think inductively. The first step is to get the root. Obviously, the root should be in pairs with all the nodes. If there isn't exactly one such node, then there are 0 ways.",
    "The number of pairs involving a node must be less than or equal to that number of its parent.",
    "Actually, if it's equal, then there is not exactly 1 way, because they can be swapped.",
    "Recursively, given a set of nodes, get the node with the most pairs, then this must be a root and have no parents in the current set of nodes."
  ]
}
