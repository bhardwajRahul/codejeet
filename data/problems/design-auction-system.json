{
  "id": "3815",
  "title": "Design Auction System",
  "slug": "design-auction-system",
  "difficulty": "Medium",
  "category": "Algorithms",
  "content_html": "<p>You are asked to design an auction system that manages bids from multiple users in real time.</p>\n\n<p>Each bid is associated with a <code>userId</code>, an <code>itemId</code>, and a <code>bidAmount</code>.</p>\n\n<p>Implement the <code>AuctionSystem</code> class:​​​​​​​</p>\n\n<ul>\n\t<li><code>AuctionSystem()</code>: Initializes the <code>AuctionSystem</code> object.</li>\n\t<li><code>void addBid(int userId, int itemId, int bidAmount)</code>: Adds a new bid for <code>itemId</code> by <code>userId</code> with <code>bidAmount</code>. If the same <code>userId</code> <strong>already</strong> has a bid on <code>itemId</code>, <strong>replace</strong> it with the new <code>bidAmount</code>.</li>\n\t<li><code>void updateBid(int userId, int itemId, int newAmount)</code>: Updates the existing bid of <code>userId</code> for <code>itemId</code> to <code>newAmount</code>. It is <strong>guaranteed</strong> that this bid <em>exists</em>.</li>\n\t<li><code>void removeBid(int userId, int itemId)</code>: Removes the bid of <code>userId</code> for <code>itemId</code>. It is <strong>guaranteed</strong> that this bid <em>exists</em>.</li>\n\t<li><code>int getHighestBidder(int itemId)</code>: Returns the <code>userId</code> of the <strong>highest</strong> bidder for <code>itemId</code>. If multiple users have the <strong>same highest</strong> <code>bidAmount</code>, return the user with the <strong>highest</strong> <code>userId</code>. If no bids exist for the item, return -1.</li>\n</ul>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong><br />\n<span class=\"example-io\">[&quot;AuctionSystem&quot;, &quot;addBid&quot;, &quot;addBid&quot;, &quot;getHighestBidder&quot;, &quot;updateBid&quot;, &quot;getHighestBidder&quot;, &quot;removeBid&quot;, &quot;getHighestBidder&quot;, &quot;getHighestBidder&quot;]<br />\n[[], [1, 7, 5], [2, 7, 6], [7], [1, 7, 8], [7], [2, 7], [7], [3]]</span></p>\n\n<p><strong>Output:</strong><br />\n<span class=\"example-io\">[null, null, null, 2, null, 1, null, 1, -1] </span></p>\n\n<p><strong>Explanation</strong></p>\nAuctionSystem auctionSystem = new AuctionSystem(); // Initialize the Auction system<br />\nauctionSystem.addBid(1, 7, 5); // User 1 bids 5 on item 7<br />\nauctionSystem.addBid(2, 7, 6); // User 2 bids 6 on item 7<br />\nauctionSystem.getHighestBidder(7); // return 2 as User 2 has the highest bid<br />\nauctionSystem.updateBid(1, 7, 8); // User 1 updates bid to 8 on item 7<br />\nauctionSystem.getHighestBidder(7); // return 1 as User 1 now has the highest bid<br />\nauctionSystem.removeBid(2, 7); // Remove User 2&#39;s bid on item 7<br />\nauctionSystem.getHighestBidder(7); // return 1 as User 1 is the current highest bidder<br />\nauctionSystem.getHighestBidder(3); // return -1 as no bids exist for item 3</div>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= userId, itemId &lt;= 5 * 10<sup>4</sup></code></li>\n\t<li><code>1 &lt;= bidAmount, newAmount &lt;= 10<sup>9</sup></code></li>\n\t<li>At most <code>5 * 10<sup>4</sup></code> total calls to <code>addBid</code>, <code>updateBid</code>, <code>removeBid</code>, and <code>getHighestBidder</code>.</li>\n\t<li>The input is generated such that for <code>updateBid</code> and <code>removeBid</code>, the bid from the given <code>userId</code> for the given <code>itemId</code> will be valid.</li>\n</ul>\n",
  "content_markdown": "You are asked to design an auction system that manages bids from multiple users in real time.\n\nEach bid is associated with a `userId`, an `itemId`, and a `bidAmount`.\n\nImplement the `AuctionSystem` class:​​​​​​​\n\n  * `AuctionSystem()`: Initializes the `AuctionSystem` object.\n  * `void addBid(int userId, int itemId, int bidAmount)`: Adds a new bid for `itemId` by `userId` with `bidAmount`. If the same `userId` **already** has a bid on `itemId`, **replace** it with the new `bidAmount`.\n  * `void updateBid(int userId, int itemId, int newAmount)`: Updates the existing bid of `userId` for `itemId` to `newAmount`. It is **guaranteed** that this bid _exists_.\n  * `void removeBid(int userId, int itemId)`: Removes the bid of `userId` for `itemId`. It is **guaranteed** that this bid _exists_.\n  * `int getHighestBidder(int itemId)`: Returns the `userId` of the **highest** bidder for `itemId`. If multiple users have the **same highest** `bidAmount`, return the user with the **highest** `userId`. If no bids exist for the item, return -1.\n\n\n\n \n\n**Example 1:**\n\n**Input:**  \n[\"AuctionSystem\", \"addBid\", \"addBid\", \"getHighestBidder\", \"updateBid\", \"getHighestBidder\", \"removeBid\", \"getHighestBidder\", \"getHighestBidder\"]  \n[[], [1, 7, 5], [2, 7, 6], [7], [1, 7, 8], [7], [2, 7], [7], [3]]\n\n**Output:**  \n[null, null, null, 2, null, 1, null, 1, -1] \n\n**Explanation**\n\nAuctionSystem auctionSystem = new AuctionSystem(); // Initialize the Auction system  \nauctionSystem.addBid(1, 7, 5); // User 1 bids 5 on item 7  \nauctionSystem.addBid(2, 7, 6); // User 2 bids 6 on item 7  \nauctionSystem.getHighestBidder(7); // return 2 as User 2 has the highest bid  \nauctionSystem.updateBid(1, 7, 8); // User 1 updates bid to 8 on item 7  \nauctionSystem.getHighestBidder(7); // return 1 as User 1 now has the highest bid  \nauctionSystem.removeBid(2, 7); // Remove User 2's bid on item 7  \nauctionSystem.getHighestBidder(7); // return 1 as User 1 is the current highest bidder  \nauctionSystem.getHighestBidder(3); // return -1 as no bids exist for item 3\n\n \n\n**Constraints:**\n\n  * `1 <= userId, itemId <= 5 * 104`\n  * `1 <= bidAmount, newAmount <= 109`\n  * At most `5 * 104` total calls to `addBid`, `updateBid`, `removeBid`, and `getHighestBidder`.\n  * The input is generated such that for `updateBid` and `removeBid`, the bid from the given `userId` for the given `itemId` will be valid.",
  "question": "You are asked to design an auction system that manages bids from multiple users in real time.\n\nEach bid is associated with a `userId`, an `itemId`, and a `bidAmount`.\n\nImplement the `AuctionSystem` class:​​​​​​​\n\n  * `AuctionSystem()`: Initializes the `AuctionSystem` object.\n  * `void addBid(int userId, int itemId, int bidAmount)`: Adds a new bid for `itemId` by `userId` with `bidAmount`. If the same `userId` **already** has a bid on `itemId`, **replace** it with the new `bidAmount`.\n  * `void updateBid(int userId, int itemId, int newAmount)`: Updates the existing bid of `userId` for `itemId` to `newAmount`. It is **guaranteed** that this bid _exists_.\n  * `void removeBid(int userId, int itemId)`: Removes the bid of `userId` for `itemId`. It is **guaranteed** that this bid _exists_.\n  * `int getHighestBidder(int itemId)`: Returns the `userId` of the **highest** bidder for `itemId`. If multiple users have the **same highest** `bidAmount`, return the user with the **highest** `userId`. If no bids exist for the item, return -1.",
  "examples": "**Example 1:**\n\n**Input:**  \n[\"AuctionSystem\", \"addBid\", \"addBid\", \"getHighestBidder\", \"updateBid\", \"getHighestBidder\", \"removeBid\", \"getHighestBidder\", \"getHighestBidder\"]  \n[[], [1, 7, 5], [2, 7, 6], [7], [1, 7, 8], [7], [2, 7], [7], [3]]\n\n**Output:**  \n[null, null, null, 2, null, 1, null, 1, -1] \n\n**Explanation**\n\nAuctionSystem auctionSystem = new AuctionSystem(); // Initialize the Auction system  \nauctionSystem.addBid(1, 7, 5); // User 1 bids 5 on item 7  \nauctionSystem.addBid(2, 7, 6); // User 2 bids 6 on item 7  \nauctionSystem.getHighestBidder(7); // return 2 as User 2 has the highest bid  \nauctionSystem.updateBid(1, 7, 8); // User 1 updates bid to 8 on item 7  \nauctionSystem.getHighestBidder(7); // return 1 as User 1 now has the highest bid  \nauctionSystem.removeBid(2, 7); // Remove User 2's bid on item 7  \nauctionSystem.getHighestBidder(7); // return 1 as User 1 is the current highest bidder  \nauctionSystem.getHighestBidder(3); // return -1 as no bids exist for item 3",
  "constraints": "**Constraints:**\n\n  * `1 <= userId, itemId <= 5 * 104`\n  * `1 <= bidAmount, newAmount <= 109`\n  * At most `5 * 104` total calls to `addBid`, `updateBid`, `removeBid`, and `getHighestBidder`.\n  * The input is generated such that for `updateBid` and `removeBid`, the bid from the given `userId` for the given `itemId` will be valid.",
  "topics": ["Hash Table", "Design", "Heap (Priority Queue)", "Ordered Set"],
  "total_accepted": 14722,
  "total_submissions": 35193,
  "acceptance_rate": "41.8%",
  "similar_questions": [],
  "hints": [
    "Maintain a map from <code>itemId</code> to its active bids.",
    "For each item, use a data structure ordered by <code>(bidAmount, userId)</code> to get the highest bidder efficiently.",
    "On <code>addBid</code> or <code>updateBid</code>, remove the old entry (if any) and insert the new one.",
    "On <code>removeBid</code>, delete the corresponding entry; return the top element for <code>getHighestBidder</code>."
  ]
}
