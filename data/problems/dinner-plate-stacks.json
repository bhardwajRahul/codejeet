{
  "id": "1172",
  "title": "Dinner Plate Stacks",
  "slug": "dinner-plate-stacks",
  "difficulty": "Hard",
  "category": "Algorithms",
  "content_html": "<p>You have an infinite number of stacks arranged in a row and numbered (left to right) from <code>0</code>, each of the stacks has the same maximum capacity.</p>\n\n<p>Implement the <code>DinnerPlates</code> class:</p>\n\n<ul>\n\t<li><code>DinnerPlates(int capacity)</code> Initializes the object with the maximum capacity of the stacks <code>capacity</code>.</li>\n\t<li><code>void push(int val)</code> Pushes the given integer <code>val</code> into the leftmost stack with a size less than <code>capacity</code>.</li>\n\t<li><code>int pop()</code> Returns the value at the top of the rightmost non-empty stack and removes it from that stack, and returns <code>-1</code> if all the stacks are empty.</li>\n\t<li><code>int popAtStack(int index)</code> Returns the value at the top of the stack with the given index <code>index</code> and removes it from that stack or returns <code>-1</code> if the stack with that given index is empty.</li>\n</ul>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<pre>\n<strong>Input</strong>\n[&quot;DinnerPlates&quot;, &quot;push&quot;, &quot;push&quot;, &quot;push&quot;, &quot;push&quot;, &quot;push&quot;, &quot;popAtStack&quot;, &quot;push&quot;, &quot;push&quot;, &quot;popAtStack&quot;, &quot;popAtStack&quot;, &quot;pop&quot;, &quot;pop&quot;, &quot;pop&quot;, &quot;pop&quot;, &quot;pop&quot;]\n[[2], [1], [2], [3], [4], [5], [0], [20], [21], [0], [2], [], [], [], [], []]\n<strong>Output</strong>\n[null, null, null, null, null, null, 2, null, null, 20, 21, 5, 4, 3, 1, -1]\n\n<strong>Explanation:</strong> \nDinnerPlates D = DinnerPlates(2);  // Initialize with capacity = 2\nD.push(1);\nD.push(2);\nD.push(3);\nD.push(4);\nD.push(5);         // The stacks are now:  2  4\n                                           1  3  5\n                                           ﹈ ﹈ ﹈\nD.popAtStack(0);   // Returns 2.  The stacks are now:     4\n                                                       1  3  5\n                                                       ﹈ ﹈ ﹈\nD.push(20);        // The stacks are now: 20  4\n                                           1  3  5\n                                           ﹈ ﹈ ﹈\nD.push(21);        // The stacks are now: 20  4 21\n                                           1  3  5\n                                           ﹈ ﹈ ﹈\nD.popAtStack(0);   // Returns 20.  The stacks are now:     4 21\n                                                        1  3  5\n                                                        ﹈ ﹈ ﹈\nD.popAtStack(2);   // Returns 21.  The stacks are now:     4\n                                                        1  3  5\n                                                        ﹈ ﹈ ﹈ \nD.pop()            // Returns 5.  The stacks are now:      4\n                                                        1  3 \n                                                        ﹈ ﹈  \nD.pop()            // Returns 4.  The stacks are now:   1  3 \n                                                        ﹈ ﹈   \nD.pop()            // Returns 3.  The stacks are now:   1 \n                                                        ﹈   \nD.pop()            // Returns 1.  There are no stacks.\nD.pop()            // Returns -1.  There are still no stacks.\n</pre>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= capacity &lt;= 2 * 10<sup>4</sup></code></li>\n\t<li><code>1 &lt;= val &lt;= 2 * 10<sup>4</sup></code></li>\n\t<li><code>0 &lt;= index &lt;= 10<sup>5</sup></code></li>\n\t<li>At most <code>2 * 10<sup>5</sup></code> calls will be made to <code>push</code>, <code>pop</code>, and <code>popAtStack</code>.</li>\n</ul>\n",
  "content_markdown": "You have an infinite number of stacks arranged in a row and numbered (left to right) from `0`, each of the stacks has the same maximum capacity.\n\nImplement the `DinnerPlates` class:\n\n  * `DinnerPlates(int capacity)` Initializes the object with the maximum capacity of the stacks `capacity`.\n  * `void push(int val)` Pushes the given integer `val` into the leftmost stack with a size less than `capacity`.\n  * `int pop()` Returns the value at the top of the rightmost non-empty stack and removes it from that stack, and returns `-1` if all the stacks are empty.\n  * `int popAtStack(int index)` Returns the value at the top of the stack with the given index `index` and removes it from that stack or returns `-1` if the stack with that given index is empty.\n\n\n\n \n\n**Example 1:**\n    \n    \n    **Input**\n    [\"DinnerPlates\", \"push\", \"push\", \"push\", \"push\", \"push\", \"popAtStack\", \"push\", \"push\", \"popAtStack\", \"popAtStack\", \"pop\", \"pop\", \"pop\", \"pop\", \"pop\"]\n    [[2], [1], [2], [3], [4], [5], [0], [20], [21], [0], [2], [], [], [], [], []]\n    **Output**\n    [null, null, null, null, null, null, 2, null, null, 20, 21, 5, 4, 3, 1, -1]\n    \n    **Explanation:** \n    DinnerPlates D = DinnerPlates(2);  // Initialize with capacity = 2\n    D.push(1);\n    D.push(2);\n    D.push(3);\n    D.push(4);\n    D.push(5);         // The stacks are now:  2  4\n                                               1  3  5\n                                               ﹈ ﹈ ﹈\n    D.popAtStack(0);   // Returns 2.  The stacks are now:     4\n                                                           1  3  5\n                                                           ﹈ ﹈ ﹈\n    D.push(20);        // The stacks are now: 20  4\n                                               1  3  5\n                                               ﹈ ﹈ ﹈\n    D.push(21);        // The stacks are now: 20  4 21\n                                               1  3  5\n                                               ﹈ ﹈ ﹈\n    D.popAtStack(0);   // Returns 20.  The stacks are now:     4 21\n                                                            1  3  5\n                                                            ﹈ ﹈ ﹈\n    D.popAtStack(2);   // Returns 21.  The stacks are now:     4\n                                                            1  3  5\n                                                            ﹈ ﹈ ﹈ \n    D.pop()            // Returns 5.  The stacks are now:      4\n                                                            1  3 \n                                                            ﹈ ﹈  \n    D.pop()            // Returns 4.  The stacks are now:   1  3 \n                                                            ﹈ ﹈   \n    D.pop()            // Returns 3.  The stacks are now:   1 \n                                                            ﹈   \n    D.pop()            // Returns 1.  There are no stacks.\n    D.pop()            // Returns -1.  There are still no stacks.\n    \n\n \n\n**Constraints:**\n\n  * `1 <= capacity <= 2 * 104`\n  * `1 <= val <= 2 * 104`\n  * `0 <= index <= 105`\n  * At most `2 * 105` calls will be made to `push`, `pop`, and `popAtStack`.",
  "question": "You have an infinite number of stacks arranged in a row and numbered (left to right) from `0`, each of the stacks has the same maximum capacity.\n\nImplement the `DinnerPlates` class:\n\n  * `DinnerPlates(int capacity)` Initializes the object with the maximum capacity of the stacks `capacity`.\n  * `void push(int val)` Pushes the given integer `val` into the leftmost stack with a size less than `capacity`.\n  * `int pop()` Returns the value at the top of the rightmost non-empty stack and removes it from that stack, and returns `-1` if all the stacks are empty.\n  * `int popAtStack(int index)` Returns the value at the top of the stack with the given index `index` and removes it from that stack or returns `-1` if the stack with that given index is empty.",
  "examples": "**Example 1:**\n    \n    \n    **Input**\n    [\"DinnerPlates\", \"push\", \"push\", \"push\", \"push\", \"push\", \"popAtStack\", \"push\", \"push\", \"popAtStack\", \"popAtStack\", \"pop\", \"pop\", \"pop\", \"pop\", \"pop\"]\n    [[2], [1], [2], [3], [4], [5], [0], [20], [21], [0], [2], [], [], [], [], []]\n    **Output**\n    [null, null, null, null, null, null, 2, null, null, 20, 21, 5, 4, 3, 1, -1]\n    \n    **Explanation:** \n    DinnerPlates D = DinnerPlates(2);  // Initialize with capacity = 2\n    D.push(1);\n    D.push(2);\n    D.push(3);\n    D.push(4);\n    D.push(5);         // The stacks are now:  2  4\n                                               1  3  5\n                                               ﹈ ﹈ ﹈\n    D.popAtStack(0);   // Returns 2.  The stacks are now:     4\n                                                           1  3  5\n                                                           ﹈ ﹈ ﹈\n    D.push(20);        // The stacks are now: 20  4\n                                               1  3  5\n                                               ﹈ ﹈ ﹈\n    D.push(21);        // The stacks are now: 20  4 21\n                                               1  3  5\n                                               ﹈ ﹈ ﹈\n    D.popAtStack(0);   // Returns 20.  The stacks are now:     4 21\n                                                            1  3  5\n                                                            ﹈ ﹈ ﹈\n    D.popAtStack(2);   // Returns 21.  The stacks are now:     4\n                                                            1  3  5\n                                                            ﹈ ﹈ ﹈ \n    D.pop()            // Returns 5.  The stacks are now:      4\n                                                            1  3 \n                                                            ﹈ ﹈  \n    D.pop()            // Returns 4.  The stacks are now:   1  3 \n                                                            ﹈ ﹈   \n    D.pop()            // Returns 3.  The stacks are now:   1 \n                                                            ﹈   \n    D.pop()            // Returns 1.  There are no stacks.\n    D.pop()            // Returns -1.  There are still no stacks.",
  "constraints": "**Constraints:**\n\n  * `1 <= capacity <= 2 * 104`\n  * `1 <= val <= 2 * 104`\n  * `0 <= index <= 105`\n  * At most `2 * 105` calls will be made to `push`, `pop`, and `popAtStack`.",
  "topics": ["Hash Table", "Stack", "Design", "Heap (Priority Queue)"],
  "total_accepted": 23296,
  "total_submissions": 69597,
  "acceptance_rate": "33.5%",
  "similar_questions": [],
  "hints": [
    "Use a data structure to save the plate status. You may need to operate the exact index. Maintain the leftmost vacant stack and the rightmost non-empty stack.",
    "Use a list of stack to store the plate status. Use heap to maintain the leftmost and rightmost valid stack."
  ]
}
