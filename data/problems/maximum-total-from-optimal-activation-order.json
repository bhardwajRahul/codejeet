{
  "id": "3645",
  "title": "Maximum Total from Optimal Activation Order",
  "slug": "maximum-total-from-optimal-activation-order",
  "difficulty": "Medium",
  "category": "Algorithms",
  "content_html": "<p>You are given two integer arrays <code>value</code> and <code>limit</code>, both of length <code>n</code>.</p>\n\n<p>Initially, all elements are <strong>inactive</strong>. You may activate them in any order.</p>\n\n<ul>\n\t<li>To activate an inactive element at index <code>i</code>, the number of <strong>currently</strong> active elements must be <strong>strictly less</strong> than <code>limit[i]</code>.</li>\n\t<li>When you activate the element at index <code>i</code>, it adds <code>value[i]</code> to the <strong>total</strong> activation value (i.e., the sum of <code>value[i]</code> for all elements that have undergone activation operations).</li>\n\t<li>After each activation, if the number of <strong>currently</strong> active elements becomes <code>x</code>, then <strong>all</strong> elements <code>j</code> with <code>limit[j] &lt;= x</code> become <strong>permanently</strong> inactive, even if they are already active.</li>\n</ul>\n\n<p>Return the <strong>maximum</strong> <strong>total</strong> you can obtain by choosing the activation order optimally.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">value = [3,5,8], limit = [2,1,3]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">16</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>One optimal activation order is:</p>\n\n<table>\n\t<thead>\n\t\t<tr>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Step</th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Activated <code>i</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\"><code>value[i]</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Active Before <code>i</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Active After <code>i</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Becomes Inactive <code>j</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Inactive Elements</th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Total</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">1</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">1</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">5</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">0</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">1</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\"><code>j = 1</code> as <code>limit[1] = 1</code></td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">[1]</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">5</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">2</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">0</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">3</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">0</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">1</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">-</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">[1]</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">8</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">3</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">2</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">8</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">1</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">2</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\"><code>j = 0</code> as <code>limit[0] = 2</code></td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">[0, 1]</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">16</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>Thus, the maximum possible total is 16.</p>\n</div>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">value = [4,2,6], limit = [1,1,1]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">6</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>One optimal activation order is:</p>\n\n<table style=\"border: 1px solid black;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Step</th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Activated <code>i</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\"><code>value[i]</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Active Before <code>i</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Active After <code>i</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Becomes Inactive <code>j</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Inactive Elements</th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Total</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">1</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">2</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">6</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">0</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">1</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\"><code>j = 0, 1, 2</code> as <code>limit[j] = 1</code></td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">[0, 1, 2]</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">6</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>Thus, the maximum possible total is 6.</p>\n</div>\n\n<p><strong class=\"example\">Example 3:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">value = [4,1,5,2], limit = [3,3,2,3]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">12</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>One optimal activation order is:​​​​​​​<strong>​​​​​​​</strong></p>\n\n<table style=\"border: 1px solid black;\">\n\t<thead>\n\t\t<tr>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Step</th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Activated <code>i</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\"><code>value[i]</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Active Before <code>i</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Active After <code>i</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Becomes Inactive <code>j</code></th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Inactive Elements</th>\n\t\t\t<th align=\"center\" style=\"border: 1px solid black;\">Total</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">1</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">2</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">5</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">0</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">1</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">-</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">[ ]</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">5</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">2</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">0</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">4</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">1</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">2</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\"><code>j = 2</code> as <code>limit[2] = 2</code></td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">[2]</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">9</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">3</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">1</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">1</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">1</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">2</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">-</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">[2]</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">10</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">4</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">3</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">2</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">2</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">3</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\"><code>j = 0, 1, 3</code> as <code>limit[j] = 3</code></td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">[0, 1, 2, 3]</td>\n\t\t\t<td align=\"center\" style=\"border: 1px solid black;\">12</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>Thus, the maximum possible total is 12.</p>\n</div>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= n == value.length == limit.length &lt;= 10<sup>5</sup></code></li>\n\t<li><code>1 &lt;= value[i] &lt;= 10<sup>5</sup></code>​​​​​​​</li>\n\t<li><code>1 &lt;= limit[i] &lt;= n</code></li>\n</ul>\n",
  "content_markdown": "You are given two integer arrays `value` and `limit`, both of length `n`.\n\nInitially, all elements are **inactive**. You may activate them in any order.\n\n  * To activate an inactive element at index `i`, the number of **currently** active elements must be **strictly less** than `limit[i]`.\n  * When you activate the element at index `i`, it adds `value[i]` to the **total** activation value (i.e., the sum of `value[i]` for all elements that have undergone activation operations).\n  * After each activation, if the number of **currently** active elements becomes `x`, then **all** elements `j` with `limit[j] <= x` become **permanently** inactive, even if they are already active.\n\n\n\nReturn the **maximum** **total** you can obtain by choosing the activation order optimally.\n\n \n\n**Example 1:**\n\n**Input:** value = [3,5,8], limit = [2,1,3]\n\n**Output:** 16\n\n**Explanation:**\n\nOne optimal activation order is:\n\nStep | Activated `i` | `value[i]` | Active Before `i` | Active After `i` | Becomes Inactive `j` | Inactive Elements | Total  \n---|---|---|---|---|---|---|---  \n1 | 1 | 5 | 0 | 1 | `j = 1` as `limit[1] = 1` | [1] | 5  \n2 | 0 | 3 | 0 | 1 | - | [1] | 8  \n3 | 2 | 8 | 1 | 2 | `j = 0` as `limit[0] = 2` | [0, 1] | 16  \n  \nThus, the maximum possible total is 16.\n\n**Example 2:**\n\n**Input:** value = [4,2,6], limit = [1,1,1]\n\n**Output:** 6\n\n**Explanation:**\n\nOne optimal activation order is:\n\nStep | Activated `i` | `value[i]` | Active Before `i` | Active After `i` | Becomes Inactive `j` | Inactive Elements | Total  \n---|---|---|---|---|---|---|---  \n1 | 2 | 6 | 0 | 1 | `j = 0, 1, 2` as `limit[j] = 1` | [0, 1, 2] | 6  \n  \nThus, the maximum possible total is 6.\n\n**Example 3:**\n\n**Input:** value = [4,1,5,2], limit = [3,3,2,3]\n\n**Output:** 12\n\n**Explanation:**\n\nOne optimal activation order is:​​​​​​​**​​​​​​​**\n\nStep | Activated `i` | `value[i]` | Active Before `i` | Active After `i` | Becomes Inactive `j` | Inactive Elements | Total  \n---|---|---|---|---|---|---|---  \n1 | 2 | 5 | 0 | 1 | - | [ ] | 5  \n2 | 0 | 4 | 1 | 2 | `j = 2` as `limit[2] = 2` | [2] | 9  \n3 | 1 | 1 | 1 | 2 | - | [2] | 10  \n4 | 3 | 2 | 2 | 3 | `j = 0, 1, 3` as `limit[j] = 3` | [0, 1, 2, 3] | 12  \n  \nThus, the maximum possible total is 12.\n\n \n\n**Constraints:**\n\n  * `1 <= n == value.length == limit.length <= 105`\n  * `1 <= value[i] <= 105`​​​​​​​\n  * `1 <= limit[i] <= n`",
  "question": "You are given two integer arrays `value` and `limit`, both of length `n`.\n\nInitially, all elements are **inactive**. You may activate them in any order.\n\n  * To activate an inactive element at index `i`, the number of **currently** active elements must be **strictly less** than `limit[i]`.\n  * When you activate the element at index `i`, it adds `value[i]` to the **total** activation value (i.e., the sum of `value[i]` for all elements that have undergone activation operations).\n  * After each activation, if the number of **currently** active elements becomes `x`, then **all** elements `j` with `limit[j] <= x` become **permanently** inactive, even if they are already active.\n\n\n\nReturn the **maximum** **total** you can obtain by choosing the activation order optimally.",
  "examples": "**Example 1:**\n\n**Input:** value = [3,5,8], limit = [2,1,3]\n\n**Output:** 16\n\n**Explanation:**\n\nOne optimal activation order is:\n\nStep | Activated `i` | `value[i]` | Active Before `i` | Active After `i` | Becomes Inactive `j` | Inactive Elements | Total  \n---|---|---|---|---|---|---|---  \n1 | 1 | 5 | 0 | 1 | `j = 1` as `limit[1] = 1` | [1] | 5  \n2 | 0 | 3 | 0 | 1 | - | [1] | 8  \n3 | 2 | 8 | 1 | 2 | `j = 0` as `limit[0] = 2` | [0, 1] | 16  \n  \nThus, the maximum possible total is 16.\n\n**Example 2:**\n\n**Input:** value = [4,2,6], limit = [1,1,1]\n\n**Output:** 6\n\n**Explanation:**\n\nOne optimal activation order is:\n\nStep | Activated `i` | `value[i]` | Active Before `i` | Active After `i` | Becomes Inactive `j` | Inactive Elements | Total  \n---|---|---|---|---|---|---|---  \n1 | 2 | 6 | 0 | 1 | `j = 0, 1, 2` as `limit[j] = 1` | [0, 1, 2] | 6  \n  \nThus, the maximum possible total is 6.\n\n**Example 3:**\n\n**Input:** value = [4,1,5,2], limit = [3,3,2,3]\n\n**Output:** 12\n\n**Explanation:**\n\nOne optimal activation order is:​​​​​​​**​​​​​​​**\n\nStep | Activated `i` | `value[i]` | Active Before `i` | Active After `i` | Becomes Inactive `j` | Inactive Elements | Total  \n---|---|---|---|---|---|---|---  \n1 | 2 | 5 | 0 | 1 | - | [ ] | 5  \n2 | 0 | 4 | 1 | 2 | `j = 2` as `limit[2] = 2` | [2] | 9  \n3 | 1 | 1 | 1 | 2 | - | [2] | 10  \n4 | 3 | 2 | 2 | 3 | `j = 0, 1, 3` as `limit[j] = 3` | [0, 1, 2, 3] | 12  \n  \nThus, the maximum possible total is 12.",
  "constraints": "**Constraints:**\n\n  * `1 <= n == value.length == limit.length <= 105`\n  * `1 <= value[i] <= 105`​​​​​​​\n  * `1 <= limit[i] <= n`",
  "topics": ["Array", "Two Pointers", "Greedy", "Sorting", "Heap (Priority Queue)"],
  "total_accepted": 17510,
  "total_submissions": 53003,
  "acceptance_rate": "33.0%",
  "similar_questions": [],
  "hints": [
    "Group the items by their <code>limit</code> values, as decisions for each <code>limit</code> are independent.",
    "For a group with <code>limit = j</code> and <code>m</code> items, its contribution is the sum of the top <code>min(j, m)</code> values.",
    "To extract each group's top values, use a min-heap of capacity <code>j</code>: push each <code>value[i]</code>, and whenever the heap size exceeds <code>j</code>, pop the smallest.",
    "After processing a group's heap, sum its elements and add to the overall total; repeat for all groups in any order."
  ]
}
