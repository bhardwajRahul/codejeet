{
  "id": "3630",
  "title": "Partition Array for Maximum XOR and AND",
  "slug": "partition-array-for-maximum-xor-and-and",
  "difficulty": "Hard",
  "category": "Algorithms",
  "content_html": "<p>You are given an integer array <code>nums</code>.</p>\n\n<p>Partition the array into <strong>three</strong> (possibly empty) <span data-keyword=\"subsequence-array\">subsequences</span> <code>A</code>, <code>B</code>, and <code>C</code> such that every element of <code>nums</code> belongs to <strong>exactly</strong> one subsequence.</p>\n\n<p>Your goal is to <strong>maximize</strong> the value of: <code>XOR(A) + AND(B) + XOR(C)</code></p>\n\n<p>where:</p>\n\n<ul>\n\t<li><code>XOR(arr)</code> denotes the bitwise XOR of all elements in <code>arr</code>. If <code>arr</code> is empty, its value is defined as 0.</li>\n\t<li><code>AND(arr)</code> denotes the bitwise AND of all elements in <code>arr</code>. If <code>arr</code> is empty, its value is defined as 0.</li>\n</ul>\n\n<p>Return the <strong>maximum</strong> value achievable.</p>\n\n<p><strong>Note:</strong> If multiple partitions result in the same <strong>maximum</strong> sum, you can consider any one of them.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">nums = [2,3]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">5</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>One optimal partition is:</p>\n\n<ul>\n\t<li><code>A = [3], XOR(A) = 3</code></li>\n\t<li><code>B = [2], AND(B) = 2</code></li>\n\t<li><code>C = [], XOR(C) = 0</code></li>\n</ul>\n\n<p>The maximum value of: <code>XOR(A) + AND(B) + XOR(C) = 3 + 2 + 0 = 5</code>. Thus, the answer is 5.</p>\n</div>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">nums = [1,3,2]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">6</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>One optimal partition is:</p>\n\n<ul>\n\t<li><code>A = [1], XOR(A) = 1</code></li>\n\t<li><code>B = [2], AND(B) = 2</code></li>\n\t<li><code>C = [3], XOR(C) = 3</code></li>\n</ul>\n\n<p>The maximum value of: <code>XOR(A) + AND(B) + XOR(C) = 1 + 2 + 3 = 6</code>. Thus, the answer is 6.</p>\n</div>\n\n<p><strong class=\"example\">Example 3:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">nums = [2,3,6,7]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">15</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>One optimal partition is:</p>\n\n<ul>\n\t<li><code>A = [7], XOR(A) = 7</code></li>\n\t<li><code>B = [2,3], AND(B) = 2</code></li>\n\t<li><code>C = [6], XOR(C) = 6</code></li>\n</ul>\n\n<p>The maximum value of: <code>XOR(A) + AND(B) + XOR(C) = 7 + 2 + 6 = 15</code>. Thus, the answer is 15.</p>\n</div>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= nums.length &lt;= 19</code></li>\n\t<li><code>1 &lt;= nums[i] &lt;= 10<sup>9</sup></code></li>\n</ul>\n",
  "content_markdown": "You are given an integer array `nums`.\n\nPartition the array into **three** (possibly empty) subsequences `A`, `B`, and `C` such that every element of `nums` belongs to **exactly** one subsequence.\n\nYour goal is to **maximize** the value of: `XOR(A) + AND(B) + XOR(C)`\n\nwhere:\n\n  * `XOR(arr)` denotes the bitwise XOR of all elements in `arr`. If `arr` is empty, its value is defined as 0.\n  * `AND(arr)` denotes the bitwise AND of all elements in `arr`. If `arr` is empty, its value is defined as 0.\n\n\n\nReturn the **maximum** value achievable.\n\n**Note:** If multiple partitions result in the same **maximum** sum, you can consider any one of them.\n\n \n\n**Example 1:**\n\n**Input:** nums = [2,3]\n\n**Output:** 5\n\n**Explanation:**\n\nOne optimal partition is:\n\n  * `A = [3], XOR(A) = 3`\n  * `B = [2], AND(B) = 2`\n  * `C = [], XOR(C) = 0`\n\n\n\nThe maximum value of: `XOR(A) + AND(B) + XOR(C) = 3 + 2 + 0 = 5`. Thus, the answer is 5.\n\n**Example 2:**\n\n**Input:** nums = [1,3,2]\n\n**Output:** 6\n\n**Explanation:**\n\nOne optimal partition is:\n\n  * `A = [1], XOR(A) = 1`\n  * `B = [2], AND(B) = 2`\n  * `C = [3], XOR(C) = 3`\n\n\n\nThe maximum value of: `XOR(A) + AND(B) + XOR(C) = 1 + 2 + 3 = 6`. Thus, the answer is 6.\n\n**Example 3:**\n\n**Input:** nums = [2,3,6,7]\n\n**Output:** 15\n\n**Explanation:**\n\nOne optimal partition is:\n\n  * `A = [7], XOR(A) = 7`\n  * `B = [2,3], AND(B) = 2`\n  * `C = [6], XOR(C) = 6`\n\n\n\nThe maximum value of: `XOR(A) + AND(B) + XOR(C) = 7 + 2 + 6 = 15`. Thus, the answer is 15.\n\n \n\n**Constraints:**\n\n  * `1 <= nums.length <= 19`\n  * `1 <= nums[i] <= 109`",
  "question": "You are given an integer array `nums`.\n\nPartition the array into **three** (possibly empty) subsequences `A`, `B`, and `C` such that every element of `nums` belongs to **exactly** one subsequence.\n\nYour goal is to **maximize** the value of: `XOR(A) + AND(B) + XOR(C)`\n\nwhere:\n\n  * `XOR(arr)` denotes the bitwise XOR of all elements in `arr`. If `arr` is empty, its value is defined as 0.\n  * `AND(arr)` denotes the bitwise AND of all elements in `arr`. If `arr` is empty, its value is defined as 0.\n\n\n\nReturn the **maximum** value achievable.\n\n**Note:** If multiple partitions result in the same **maximum** sum, you can consider any one of them.",
  "examples": "**Example 1:**\n\n**Input:** nums = [2,3]\n\n**Output:** 5\n\n**Explanation:**\n\nOne optimal partition is:\n\n  * `A = [3], XOR(A) = 3`\n  * `B = [2], AND(B) = 2`\n  * `C = [], XOR(C) = 0`\n\n\n\nThe maximum value of: `XOR(A) + AND(B) + XOR(C) = 3 + 2 + 0 = 5`. Thus, the answer is 5.\n\n**Example 2:**\n\n**Input:** nums = [1,3,2]\n\n**Output:** 6\n\n**Explanation:**\n\nOne optimal partition is:\n\n  * `A = [1], XOR(A) = 1`\n  * `B = [2], AND(B) = 2`\n  * `C = [3], XOR(C) = 3`\n\n\n\nThe maximum value of: `XOR(A) + AND(B) + XOR(C) = 1 + 2 + 3 = 6`. Thus, the answer is 6.\n\n**Example 3:**\n\n**Input:** nums = [2,3,6,7]\n\n**Output:** 15\n\n**Explanation:**\n\nOne optimal partition is:\n\n  * `A = [7], XOR(A) = 7`\n  * `B = [2,3], AND(B) = 2`\n  * `C = [6], XOR(C) = 6`\n\n\n\nThe maximum value of: `XOR(A) + AND(B) + XOR(C) = 7 + 2 + 6 = 15`. Thus, the answer is 15.",
  "constraints": "**Constraints:**\n\n  * `1 <= nums.length <= 19`\n  * `1 <= nums[i] <= 109`",
  "topics": ["Array", "Math", "Greedy", "Bit Manipulation", "Enumeration"],
  "total_accepted": 7283,
  "total_submissions": 41569,
  "acceptance_rate": "17.5%",
  "similar_questions": [],
  "hints": [
    "Brute-force all subsets for <code>B</code>.",
    "Let <code>s</code> = XOR of all elements not in <code>B</code>.",
    "We want to choose a value <code>x</code> (a subset‐XOR of the \"remaining\" elements) to maximize <code>x + (s XOR x)</code>.",
    "Observe that <code>x + (s XOR x) = s + 2 * (x AND ~s)</code>.",
    "To do this efficiently, build a linear XOR basis over the values <code>nums[j] & ~s</code> for each index <code>j</code> not in <code>B</code>.",
    "Finally, greedily extract the maximum <code>x</code> from that basis."
  ]
}
