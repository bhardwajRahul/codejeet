{
  "id": "2088",
  "title": "Count Fertile Pyramids in a Land",
  "slug": "count-fertile-pyramids-in-a-land",
  "difficulty": "Hard",
  "category": "Algorithms",
  "content_html": "<p>A farmer has a <strong>rectangular grid</strong> of land with <code>m</code> rows and <code>n</code> columns that can be divided into unit cells. Each cell is either <strong>fertile</strong> (represented by a <code>1</code>) or <strong>barren</strong> (represented by a <code>0</code>). All cells outside the grid are considered barren.</p>\n\n<p>A <strong>pyramidal plot</strong> of land can be defined as a set of cells with the following criteria:</p>\n\n<ol>\n\t<li>The number of cells in the set has to be <strong>greater than </strong><code>1</code> and all cells must be <strong>fertile</strong>.</li>\n\t<li>The <strong>apex</strong> of a pyramid is the <strong>topmost</strong> cell of the pyramid. The <strong>height</strong> of a pyramid is the number of rows it covers. Let <code>(r, c)</code> be the apex of the pyramid, and its height be <code>h</code>. Then, the plot comprises of cells <code>(i, j)</code> where <code>r &lt;= i &lt;= r + h - 1</code> <strong>and</strong> <code>c - (i - r) &lt;= j &lt;= c + (i - r)</code>.</li>\n</ol>\n\n<p>An <strong>inverse pyramidal plot</strong> of land can be defined as a set of cells with similar criteria:</p>\n\n<ol>\n\t<li>The number of cells in the set has to be <strong>greater than </strong><code>1</code> and all cells must be <strong>fertile</strong>.</li>\n\t<li>The <strong>apex</strong> of an inverse pyramid is the <strong>bottommost</strong> cell of the inverse pyramid. The <strong>height</strong> of an inverse pyramid is the number of rows it covers. Let <code>(r, c)</code> be the apex of the pyramid, and its height be <code>h</code>. Then, the plot comprises of cells <code>(i, j)</code> where <code>r - h + 1 &lt;= i &lt;= r</code> <strong>and</strong> <code>c - (r - i) &lt;= j &lt;= c + (r - i)</code>.</li>\n</ol>\n\n<p>Some examples of valid and invalid pyramidal (and inverse pyramidal) plots are shown below. Black cells indicate fertile cells.</p>\n<img src=\"https://assets.leetcode.com/uploads/2021/11/08/image.png\" style=\"width: 700px; height: 156px;\" />\n<p>Given a <strong>0-indexed</strong> <code>m x n</code> binary matrix <code>grid</code> representing the farmland, return <em>the <strong>total number</strong> of pyramidal and inverse pyramidal plots that can be found in</em> <code>grid</code>.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n<img alt=\"\" src=\"https://assets.leetcode.com/uploads/2021/12/22/1.JPG\" style=\"width: 575px; height: 109px;\" />\n<pre>\n<strong>Input:</strong> grid = [[0,1,1,0],[1,1,1,1]]\n<strong>Output:</strong> 2\n<strong>Explanation:</strong> The 2 possible pyramidal plots are shown in blue and red respectively.\nThere are no inverse pyramidal plots in this grid. \nHence total number of pyramidal and inverse pyramidal plots is 2 + 0 = 2.\n</pre>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n<img alt=\"\" src=\"https://assets.leetcode.com/uploads/2021/12/22/2.JPG\" style=\"width: 502px; height: 120px;\" />\n<pre>\n<strong>Input:</strong> grid = [[1,1,1],[1,1,1]]\n<strong>Output:</strong> 2\n<strong>Explanation:</strong> The pyramidal plot is shown in blue, and the inverse pyramidal plot is shown in red. \nHence the total number of plots is 1 + 1 = 2.\n</pre>\n\n<p><strong class=\"example\">Example 3:</strong></p>\n<img alt=\"\" src=\"https://assets.leetcode.com/uploads/2021/12/22/3.JPG\" style=\"width: 676px; height: 148px;\" />\n<pre>\n<strong>Input:</strong> grid = [[1,1,1,1,0],[1,1,1,1,1],[1,1,1,1,1],[0,1,0,0,1]]\n<strong>Output:</strong> 13\n<strong>Explanation:</strong> There are 7 pyramidal plots, 3 of which are shown in the 2nd and 3rd figures.\nThere are 6 inverse pyramidal plots, 2 of which are shown in the last figure.\nThe total number of plots is 7 + 6 = 13.\n</pre>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>m == grid.length</code></li>\n\t<li><code>n == grid[i].length</code></li>\n\t<li><code>1 &lt;= m, n &lt;= 1000</code></li>\n\t<li><code>1 &lt;= m * n &lt;= 10<sup>5</sup></code></li>\n\t<li><code>grid[i][j]</code> is either <code>0</code> or <code>1</code>.</li>\n</ul>\n",
  "content_markdown": "A farmer has a **rectangular grid** of land with `m` rows and `n` columns that can be divided into unit cells. Each cell is either **fertile** (represented by a `1`) or **barren** (represented by a `0`). All cells outside the grid are considered barren.\n\nA **pyramidal plot** of land can be defined as a set of cells with the following criteria:\n\n  1. The number of cells in the set has to be **greater than**`1` and all cells must be **fertile**.\n  2. The **apex** of a pyramid is the **topmost** cell of the pyramid. The **height** of a pyramid is the number of rows it covers. Let `(r, c)` be the apex of the pyramid, and its height be `h`. Then, the plot comprises of cells `(i, j)` where `r <= i <= r + h - 1` **and** `c - (i - r) <= j <= c + (i - r)`.\n\n\n\nAn **inverse pyramidal plot** of land can be defined as a set of cells with similar criteria:\n\n  1. The number of cells in the set has to be **greater than**`1` and all cells must be **fertile**.\n  2. The **apex** of an inverse pyramid is the **bottommost** cell of the inverse pyramid. The **height** of an inverse pyramid is the number of rows it covers. Let `(r, c)` be the apex of the pyramid, and its height be `h`. Then, the plot comprises of cells `(i, j)` where `r - h + 1 <= i <= r` **and** `c - (r - i) <= j <= c + (r - i)`.\n\n\n\nSome examples of valid and invalid pyramidal (and inverse pyramidal) plots are shown below. Black cells indicate fertile cells.\n\n![](https://assets.leetcode.com/uploads/2021/11/08/image.png)\n\nGiven a **0-indexed** `m x n` binary matrix `grid` representing the farmland, return _the**total number** of pyramidal and inverse pyramidal plots that can be found in_ `grid`.\n\n \n\n**Example 1:**\n\n![](https://assets.leetcode.com/uploads/2021/12/22/1.JPG)\n    \n    \n    **Input:** grid = [[0,1,1,0],[1,1,1,1]]\n    **Output:** 2\n    **Explanation:** The 2 possible pyramidal plots are shown in blue and red respectively.\n    There are no inverse pyramidal plots in this grid. \n    Hence total number of pyramidal and inverse pyramidal plots is 2 + 0 = 2.\n    \n\n**Example 2:**\n\n![](https://assets.leetcode.com/uploads/2021/12/22/2.JPG)\n    \n    \n    **Input:** grid = [[1,1,1],[1,1,1]]\n    **Output:** 2\n    **Explanation:** The pyramidal plot is shown in blue, and the inverse pyramidal plot is shown in red. \n    Hence the total number of plots is 1 + 1 = 2.\n    \n\n**Example 3:**\n\n![](https://assets.leetcode.com/uploads/2021/12/22/3.JPG)\n    \n    \n    **Input:** grid = [[1,1,1,1,0],[1,1,1,1,1],[1,1,1,1,1],[0,1,0,0,1]]\n    **Output:** 13\n    **Explanation:** There are 7 pyramidal plots, 3 of which are shown in the 2nd and 3rd figures.\n    There are 6 inverse pyramidal plots, 2 of which are shown in the last figure.\n    The total number of plots is 7 + 6 = 13.\n    \n\n \n\n**Constraints:**\n\n  * `m == grid.length`\n  * `n == grid[i].length`\n  * `1 <= m, n <= 1000`\n  * `1 <= m * n <= 105`\n  * `grid[i][j]` is either `0` or `1`.",
  "question": "A farmer has a **rectangular grid** of land with `m` rows and `n` columns that can be divided into unit cells. Each cell is either **fertile** (represented by a `1`) or **barren** (represented by a `0`). All cells outside the grid are considered barren.\n\nA **pyramidal plot** of land can be defined as a set of cells with the following criteria:\n\n  1. The number of cells in the set has to be **greater than**`1` and all cells must be **fertile**.\n  2. The **apex** of a pyramid is the **topmost** cell of the pyramid. The **height** of a pyramid is the number of rows it covers. Let `(r, c)` be the apex of the pyramid, and its height be `h`. Then, the plot comprises of cells `(i, j)` where `r <= i <= r + h - 1` **and** `c - (i - r) <= j <= c + (i - r)`.\n\n\n\nAn **inverse pyramidal plot** of land can be defined as a set of cells with similar criteria:\n\n  1. The number of cells in the set has to be **greater than**`1` and all cells must be **fertile**.\n  2. The **apex** of an inverse pyramid is the **bottommost** cell of the inverse pyramid. The **height** of an inverse pyramid is the number of rows it covers. Let `(r, c)` be the apex of the pyramid, and its height be `h`. Then, the plot comprises of cells `(i, j)` where `r - h + 1 <= i <= r` **and** `c - (r - i) <= j <= c + (r - i)`.\n\n\n\nSome examples of valid and invalid pyramidal (and inverse pyramidal) plots are shown below. Black cells indicate fertile cells.\n\n![](https://assets.leetcode.com/uploads/2021/11/08/image.png)\n\nGiven a **0-indexed** `m x n` binary matrix `grid` representing the farmland, return _the**total number** of pyramidal and inverse pyramidal plots that can be found in_ `grid`.",
  "examples": "**Example 1:**\n\n![](https://assets.leetcode.com/uploads/2021/12/22/1.JPG)\n    \n    \n    **Input:** grid = [[0,1,1,0],[1,1,1,1]]\n    **Output:** 2\n    **Explanation:** The 2 possible pyramidal plots are shown in blue and red respectively.\n    There are no inverse pyramidal plots in this grid. \n    Hence total number of pyramidal and inverse pyramidal plots is 2 + 0 = 2.\n    \n\n**Example 2:**\n\n![](https://assets.leetcode.com/uploads/2021/12/22/2.JPG)\n    \n    \n    **Input:** grid = [[1,1,1],[1,1,1]]\n    **Output:** 2\n    **Explanation:** The pyramidal plot is shown in blue, and the inverse pyramidal plot is shown in red. \n    Hence the total number of plots is 1 + 1 = 2.\n    \n\n**Example 3:**\n\n![](https://assets.leetcode.com/uploads/2021/12/22/3.JPG)\n    \n    \n    **Input:** grid = [[1,1,1,1,0],[1,1,1,1,1],[1,1,1,1,1],[0,1,0,0,1]]\n    **Output:** 13\n    **Explanation:** There are 7 pyramidal plots, 3 of which are shown in the 2nd and 3rd figures.\n    There are 6 inverse pyramidal plots, 2 of which are shown in the last figure.\n    The total number of plots is 7 + 6 = 13.",
  "constraints": "**Constraints:**\n\n  * `m == grid.length`\n  * `n == grid[i].length`\n  * `1 <= m, n <= 1000`\n  * `1 <= m * n <= 105`\n  * `grid[i][j]` is either `0` or `1`.",
  "topics": ["Array", "Dynamic Programming", "Matrix"],
  "total_accepted": 12874,
  "total_submissions": 19426,
  "acceptance_rate": "66.3%",
  "similar_questions": [
    {
      "title": "Count Square Submatrices with All Ones",
      "slug": "count-square-submatrices-with-all-ones",
      "difficulty": "Medium",
      "url": "https://leetcode.com/problems/count-square-submatrices-with-all-ones/"
    },
    {
      "title": "Get Biggest Three Rhombus Sums in a Grid",
      "slug": "get-biggest-three-rhombus-sums-in-a-grid",
      "difficulty": "Medium",
      "url": "https://leetcode.com/problems/get-biggest-three-rhombus-sums-in-a-grid/"
    }
  ],
  "hints": [
    "Think about how dynamic programming can help solve the problem.",
    "For any fixed cell (r, c), can you calculate the maximum height of the pyramid for which it is the apex? Let us denote this value as dp[r][c].",
    "How will the values at dp[r+1][c-1] and dp[r+1][c+1] help in determining the value at dp[r][c]?",
    "For the cell (r, c), is there a relation between the number of pyramids for which it serves as the apex and dp[r][c]? How does it help in calculating the answer?"
  ]
}
