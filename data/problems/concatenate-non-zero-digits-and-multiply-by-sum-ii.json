{
  "id": "3756",
  "title": "Concatenate Non-Zero Digits and Multiply by Sum II",
  "slug": "concatenate-non-zero-digits-and-multiply-by-sum-ii",
  "difficulty": "Medium",
  "category": "Algorithms",
  "content_html": "<p>You are given a string <code>s</code> of length <code>m</code> consisting of digits. You are also given a 2D integer array <code>queries</code>, where <code>queries[i] = [l<sub>i</sub>, r<sub>i</sub>]</code>.</p>\n\n<p>For each <code>queries[i]</code>, extract the <strong><span data-keyword=\"substring-nonempty\">substring</span></strong> <code>s[l<sub>i</sub>..r<sub>i</sub>]</code>. Then, perform the following:</p>\n\n<ul>\n\t<li>Form a new integer <code>x</code> by concatenating all the <strong>non-zero digits</strong> from the substring in their original order. If there are no non-zero digits, <code>x = 0</code>.</li>\n\t<li>Let <code>sum</code> be the <strong>sum of digits</strong> in <code>x</code>. The answer is <code>x * sum</code>.</li>\n</ul>\n\n<p>Return an array of integers <code>answer</code> where <code>answer[i]</code> is the answer to the <code>i<sup>th</sup></code> query.</p>\n\n<p>Since the answers may be very large, return them <strong>modulo</strong> <code>10<sup>9</sup> + 7</code>.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">s = &quot;10203004&quot;, queries = [[0,7],[1,3],[4,6]]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">[12340, 4, 9]</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li><code>s[0..7] = &quot;10203004&quot;</code>\n\n\t<ul>\n\t\t<li><code>x = 1234</code></li>\n\t\t<li><code>sum = 1 + 2 + 3 + 4 = 10</code></li>\n\t\t<li>Therefore, answer is <code>1234 * 10 = 12340</code>.</li>\n\t</ul>\n\t</li>\n\t<li><code>s[1..3] = &quot;020&quot;</code>\n\t<ul>\n\t\t<li><code>x = 2</code></li>\n\t\t<li><code>sum = 2</code></li>\n\t\t<li>Therefore, the answer is <code>2 * 2 = 4</code>.</li>\n\t</ul>\n\t</li>\n\t<li><code>s[4..6] = &quot;300&quot;</code>\n\t<ul>\n\t\t<li><code>x = 3</code></li>\n\t\t<li><code>sum = 3</code></li>\n\t\t<li>Therefore, the answer is <code>3 * 3 = 9</code>.</li>\n\t</ul>\n\t</li>\n</ul>\n</div>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">s = &quot;1000&quot;, queries = [[0,3],[1,1]]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">[1, 0]</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li><code>s[0..3] = &quot;1000&quot;</code>\n\n\t<ul>\n\t\t<li><code>x = 1</code></li>\n\t\t<li><code>sum = 1</code></li>\n\t\t<li>Therefore, the answer is <code>1 * 1 = 1</code>.</li>\n\t</ul>\n\t</li>\n\t<li><code>s[1..1] = &quot;0&quot;</code>\n\t<ul>\n\t\t<li><code>x = 0</code></li>\n\t\t<li><code>sum = 0</code></li>\n\t\t<li>Therefore, the answer is <code>0 * 0 = 0</code>.</li>\n\t</ul>\n\t</li>\n</ul>\n</div>\n\n<p><strong class=\"example\">Example 3:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">s = &quot;9876543210&quot;, queries = [[0,9]]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">[444444137]</span></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li><code>s[0..9] = &quot;9876543210&quot;</code>\n\n\t<ul>\n\t\t<li><code>x = 987654321</code></li>\n\t\t<li><code>sum = 9 + 8 + 7 + 6 + 5 + 4 + 3 + 2 + 1 = 45</code></li>\n\t\t<li>Therefore, the answer is <code>987654321 * 45 = 44444444445</code>.</li>\n\t\t<li>We return <code>44444444445 modulo (10<sup>9</sup> + 7) = 444444137</code>.</li>\n\t</ul>\n\t</li>\n</ul>\n</div>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= m == s.length &lt;= 10<sup>5</sup></code></li>\n\t<li><code>s</code> consists of digits only.</li>\n\t<li><code>1 &lt;= queries.length &lt;= 10<sup>5</sup></code></li>\n\t<li><code>queries[i] = [l<sub>i</sub>, r<sub>i</sub>]</code></li>\n\t<li><code>0 &lt;= l<sub>i</sub> &lt;= r<sub>i</sub> &lt; m</code></li>\n</ul>\n",
  "content_markdown": "You are given a string `s` of length `m` consisting of digits. You are also given a 2D integer array `queries`, where `queries[i] = [li, ri]`.\n\nFor each `queries[i]`, extract the **substring** `s[li..ri]`. Then, perform the following:\n\n  * Form a new integer `x` by concatenating all the **non-zero digits** from the substring in their original order. If there are no non-zero digits, `x = 0`.\n  * Let `sum` be the **sum of digits** in `x`. The answer is `x * sum`.\n\n\n\nReturn an array of integers `answer` where `answer[i]` is the answer to the `ith` query.\n\nSince the answers may be very large, return them **modulo** `109 + 7`.\n\n \n\n**Example 1:**\n\n**Input:** s = \"10203004\", queries = [[0,7],[1,3],[4,6]]\n\n**Output:** [12340, 4, 9]\n\n**Explanation:**\n\n  * `s[0..7] = \"10203004\"`\n    * `x = 1234`\n    * `sum = 1 + 2 + 3 + 4 = 10`\n    * Therefore, answer is `1234 * 10 = 12340`.\n  * `s[1..3] = \"020\"`\n    * `x = 2`\n    * `sum = 2`\n    * Therefore, the answer is `2 * 2 = 4`.\n  * `s[4..6] = \"300\"`\n    * `x = 3`\n    * `sum = 3`\n    * Therefore, the answer is `3 * 3 = 9`.\n\n\n\n**Example 2:**\n\n**Input:** s = \"1000\", queries = [[0,3],[1,1]]\n\n**Output:** [1, 0]\n\n**Explanation:**\n\n  * `s[0..3] = \"1000\"`\n    * `x = 1`\n    * `sum = 1`\n    * Therefore, the answer is `1 * 1 = 1`.\n  * `s[1..1] = \"0\"`\n    * `x = 0`\n    * `sum = 0`\n    * Therefore, the answer is `0 * 0 = 0`.\n\n\n\n**Example 3:**\n\n**Input:** s = \"9876543210\", queries = [[0,9]]\n\n**Output:** [444444137]\n\n**Explanation:**\n\n  * `s[0..9] = \"9876543210\"`\n    * `x = 987654321`\n    * `sum = 9 + 8 + 7 + 6 + 5 + 4 + 3 + 2 + 1 = 45`\n    * Therefore, the answer is `987654321 * 45 = 44444444445`.\n    * We return `44444444445 modulo (109 + 7) = 444444137`.\n\n\n\n \n\n**Constraints:**\n\n  * `1 <= m == s.length <= 105`\n  * `s` consists of digits only.\n  * `1 <= queries.length <= 105`\n  * `queries[i] = [li, ri]`\n  * `0 <= li <= ri < m`",
  "question": "You are given a string `s` of length `m` consisting of digits. You are also given a 2D integer array `queries`, where `queries[i] = [li, ri]`.\n\nFor each `queries[i]`, extract the **substring** `s[li..ri]`. Then, perform the following:\n\n  * Form a new integer `x` by concatenating all the **non-zero digits** from the substring in their original order. If there are no non-zero digits, `x = 0`.\n  * Let `sum` be the **sum of digits** in `x`. The answer is `x * sum`.\n\n\n\nReturn an array of integers `answer` where `answer[i]` is the answer to the `ith` query.\n\nSince the answers may be very large, return them **modulo** `109 + 7`.",
  "examples": "**Example 1:**\n\n**Input:** s = \"10203004\", queries = [[0,7],[1,3],[4,6]]\n\n**Output:** [12340, 4, 9]\n\n**Explanation:**\n\n  * `s[0..7] = \"10203004\"`\n    * `x = 1234`\n    * `sum = 1 + 2 + 3 + 4 = 10`\n    * Therefore, answer is `1234 * 10 = 12340`.\n  * `s[1..3] = \"020\"`\n    * `x = 2`\n    * `sum = 2`\n    * Therefore, the answer is `2 * 2 = 4`.\n  * `s[4..6] = \"300\"`\n    * `x = 3`\n    * `sum = 3`\n    * Therefore, the answer is `3 * 3 = 9`.\n\n\n\n**Example 2:**\n\n**Input:** s = \"1000\", queries = [[0,3],[1,1]]\n\n**Output:** [1, 0]\n\n**Explanation:**\n\n  * `s[0..3] = \"1000\"`\n    * `x = 1`\n    * `sum = 1`\n    * Therefore, the answer is `1 * 1 = 1`.\n  * `s[1..1] = \"0\"`\n    * `x = 0`\n    * `sum = 0`\n    * Therefore, the answer is `0 * 0 = 0`.\n\n\n\n**Example 3:**\n\n**Input:** s = \"9876543210\", queries = [[0,9]]\n\n**Output:** [444444137]\n\n**Explanation:**\n\n  * `s[0..9] = \"9876543210\"`\n    * `x = 987654321`\n    * `sum = 9 + 8 + 7 + 6 + 5 + 4 + 3 + 2 + 1 = 45`\n    * Therefore, the answer is `987654321 * 45 = 44444444445`.\n    * We return `44444444445 modulo (109 + 7) = 444444137`.",
  "constraints": "**Constraints:**\n\n  * `1 <= m == s.length <= 105`\n  * `s` consists of digits only.\n  * `1 <= queries.length <= 105`\n  * `queries[i] = [li, ri]`\n  * `0 <= li <= ri < m`",
  "topics": ["Math", "String", "Prefix Sum"],
  "total_accepted": 10107,
  "total_submissions": 41999,
  "acceptance_rate": "24.1%",
  "similar_questions": [],
  "hints": [
    "Track only nonzero digits: store their values and positions and keep a prefix sum for digit sums.",
    "Also build prefix concatenation values <code>P</code>, <code>pow10</code>, and set <code>mod = 10<sup>9</sup>+7</code> so any compressed substring number is obtainable from prefixes.",
    "Map each query <code>[l, r]</code> to the compressed list using precomputed mapping arrays (first nonzero at or after <code>i</code>",
    "If the mapped range is empty return <code>0</code>; otherwise get <code>x</code> from <code>P</code>, get <code>sum</code> from the digit-prefix, and return <code>(x * sum) % mod</code>."
  ]
}
