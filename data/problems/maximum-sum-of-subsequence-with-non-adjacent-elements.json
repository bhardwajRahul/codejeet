{
  "id": "3165",
  "title": "Maximum Sum of Subsequence With Non-adjacent Elements",
  "slug": "maximum-sum-of-subsequence-with-non-adjacent-elements",
  "difficulty": "Hard",
  "category": "Algorithms",
  "content_html": "<p>You are given an array <code>nums</code> consisting of integers. You are also given a 2D array <code>queries</code>, where <code>queries[i] = [pos<sub>i</sub>, x<sub>i</sub>]</code>.</p>\n\n<p>For query <code>i</code>, we first set <code>nums[pos<sub>i</sub>]</code> equal to <code>x<sub>i</sub></code>, then we calculate the answer to query <code>i</code> which is the <strong>maximum</strong> sum of a <span data-keyword=\"subsequence-array\">subsequence</span> of <code>nums</code> where <strong>no two adjacent elements are selected</strong>.</p>\n\n<p>Return the <em>sum</em> of the answers to all queries.</p>\n\n<p>Since the final answer may be very large, return it <strong>modulo</strong> <code>10<sup>9</sup> + 7</code>.</p>\n\n<p>A <strong>subsequence</strong> is an array that can be derived from another array by deleting some or no elements without changing the order of the remaining elements.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">nums = [3,5,9], queries = [[1,-2],[0,-3]]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">21</span></p>\n\n<p><strong>Explanation:</strong><br />\nAfter the 1<sup>st</sup> query, <code>nums = [3,-2,9]</code> and the maximum sum of a subsequence with non-adjacent elements is <code>3 + 9 = 12</code>.<br />\nAfter the 2<sup>nd</sup> query, <code>nums = [-3,-2,9]</code> and the maximum sum of a subsequence with non-adjacent elements is 9.</p>\n</div>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong> <span class=\"example-io\">nums = [0,-1], queries = [[0,-5]]</span></p>\n\n<p><strong>Output:</strong> <span class=\"example-io\">0</span></p>\n\n<p><strong>Explanation:</strong><br />\nAfter the 1<sup>st</sup> query, <code>nums = [-5,-1]</code> and the maximum sum of a subsequence with non-adjacent elements is 0 (choosing an empty subsequence).</p>\n</div>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>1 &lt;= nums.length &lt;= 5 * 10<sup>4</sup></code></li>\n\t<li><code>-10<sup>5</sup> &lt;= nums[i] &lt;= 10<sup>5</sup></code></li>\n\t<li><code>1 &lt;= queries.length &lt;= 5 * 10<sup>4</sup></code></li>\n\t<li><code>queries[i] == [pos<sub>i</sub>, x<sub>i</sub>]</code></li>\n\t<li><code>0 &lt;= pos<sub>i</sub> &lt;= nums.length - 1</code></li>\n\t<li><code>-10<sup>5</sup> &lt;= x<sub>i</sub> &lt;= 10<sup>5</sup></code></li>\n</ul>\n",
  "content_markdown": "You are given an array `nums` consisting of integers. You are also given a 2D array `queries`, where `queries[i] = [posi, xi]`.\n\nFor query `i`, we first set `nums[posi]` equal to `xi`, then we calculate the answer to query `i` which is the **maximum** sum of a subsequence of `nums` where **no two adjacent elements are selected**.\n\nReturn the _sum_ of the answers to all queries.\n\nSince the final answer may be very large, return it **modulo** `109 + 7`.\n\nA **subsequence** is an array that can be derived from another array by deleting some or no elements without changing the order of the remaining elements.\n\n \n\n**Example 1:**\n\n**Input:** nums = [3,5,9], queries = [[1,-2],[0,-3]]\n\n**Output:** 21\n\n**Explanation:**  \nAfter the 1st query, `nums = [3,-2,9]` and the maximum sum of a subsequence with non-adjacent elements is `3 + 9 = 12`.  \nAfter the 2nd query, `nums = [-3,-2,9]` and the maximum sum of a subsequence with non-adjacent elements is 9.\n\n**Example 2:**\n\n**Input:** nums = [0,-1], queries = [[0,-5]]\n\n**Output:** 0\n\n**Explanation:**  \nAfter the 1st query, `nums = [-5,-1]` and the maximum sum of a subsequence with non-adjacent elements is 0 (choosing an empty subsequence).\n\n \n\n**Constraints:**\n\n  * `1 <= nums.length <= 5 * 104`\n  * `-105 <= nums[i] <= 105`\n  * `1 <= queries.length <= 5 * 104`\n  * `queries[i] == [posi, xi]`\n  * `0 <= posi <= nums.length - 1`\n  * `-105 <= xi <= 105`",
  "question": "You are given an array `nums` consisting of integers. You are also given a 2D array `queries`, where `queries[i] = [posi, xi]`.\n\nFor query `i`, we first set `nums[posi]` equal to `xi`, then we calculate the answer to query `i` which is the **maximum** sum of a subsequence of `nums` where **no two adjacent elements are selected**.\n\nReturn the _sum_ of the answers to all queries.\n\nSince the final answer may be very large, return it **modulo** `109 + 7`.\n\nA **subsequence** is an array that can be derived from another array by deleting some or no elements without changing the order of the remaining elements.",
  "examples": "**Example 1:**\n\n**Input:** nums = [3,5,9], queries = [[1,-2],[0,-3]]\n\n**Output:** 21\n\n**Explanation:**  \nAfter the 1st query, `nums = [3,-2,9]` and the maximum sum of a subsequence with non-adjacent elements is `3 + 9 = 12`.  \nAfter the 2nd query, `nums = [-3,-2,9]` and the maximum sum of a subsequence with non-adjacent elements is 9.\n\n**Example 2:**\n\n**Input:** nums = [0,-1], queries = [[0,-5]]\n\n**Output:** 0\n\n**Explanation:**  \nAfter the 1st query, `nums = [-5,-1]` and the maximum sum of a subsequence with non-adjacent elements is 0 (choosing an empty subsequence).",
  "constraints": "**Constraints:**\n\n  * `1 <= nums.length <= 5 * 104`\n  * `-105 <= nums[i] <= 105`\n  * `1 <= queries.length <= 5 * 104`\n  * `queries[i] == [posi, xi]`\n  * `0 <= posi <= nums.length - 1`\n  * `-105 <= xi <= 105`",
  "topics": ["Array", "Divide and Conquer", "Dynamic Programming", "Segment Tree"],
  "total_accepted": 8313,
  "total_submissions": 53941,
  "acceptance_rate": "15.4%",
  "similar_questions": [],
  "hints": [
    "Can you solve each query in <code>O(nums.length)</code> with dynamic programming?",
    "In order to optimize, we will use segment tree where each node contains the maximum value of (front element has been chosen or not, back element has been chosen or not)."
  ]
}
