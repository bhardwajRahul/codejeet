{
  "id": "3508",
  "title": "Implement Router",
  "slug": "implement-router",
  "difficulty": "Medium",
  "category": "Algorithms",
  "content_html": "<p>Design a data structure that can efficiently manage data packets in a network router. Each data packet consists of the following attributes:</p>\n\n<ul>\n\t<li><code>source</code>: A unique identifier for the machine that generated the packet.</li>\n\t<li><code>destination</code>: A unique identifier for the target machine.</li>\n\t<li><code>timestamp</code>: The time at which the packet arrived at the router.</li>\n</ul>\n\n<p>Implement the <code>Router</code> class:</p>\n\n<p><code>Router(int memoryLimit)</code>: Initializes the Router object with a fixed memory limit.</p>\n\n<ul>\n\t<li><code>memoryLimit</code> is the <strong>maximum</strong> number of packets the router can store at any given time.</li>\n\t<li>If adding a new packet would exceed this limit, the <strong>oldest</strong> packet must be removed to free up space.</li>\n</ul>\n\n<p><code>bool addPacket(int source, int destination, int timestamp)</code>: Adds a packet with the given attributes to the router.</p>\n\n<ul>\n\t<li>A packet is considered a duplicate if another packet with the same <code>source</code>, <code>destination</code>, and <code>timestamp</code> already exists in the router.</li>\n\t<li>Return <code>true</code> if the packet is successfully added (i.e., it is not a duplicate); otherwise return <code>false</code>.</li>\n</ul>\n\n<p><code>int[] forwardPacket()</code>: Forwards the next packet in FIFO (First In First Out) order.</p>\n\n<ul>\n\t<li>Remove the packet from storage.</li>\n\t<li>Return the packet as an array <code>[source, destination, timestamp]</code>.</li>\n\t<li>If there are no packets to forward, return an empty array.</li>\n</ul>\n\n<p><code>int getCount(int destination, int startTime, int endTime)</code>:</p>\n\n<ul>\n\t<li>Returns the number of packets currently stored in the router (i.e., not yet forwarded) that have the specified destination and have timestamps in the inclusive range <code>[startTime, endTime]</code>.</li>\n</ul>\n\n<p><strong>Note</strong> that queries for <code>addPacket</code> will be made in non-decreasing order of <code>timestamp</code>.</p>\n\n<p>&nbsp;</p>\n<p><strong class=\"example\">Example 1:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong><br />\n<span class=\"example-io\">[&quot;Router&quot;, &quot;addPacket&quot;, &quot;addPacket&quot;, &quot;addPacket&quot;, &quot;addPacket&quot;, &quot;addPacket&quot;, &quot;forwardPacket&quot;, &quot;addPacket&quot;, &quot;getCount&quot;]<br />\n[[3], [1, 4, 90], [2, 5, 90], [1, 4, 90], [3, 5, 95], [4, 5, 105], [], [5, 2, 110], [5, 100, 110]]</span></p>\n\n<p><strong>Output:</strong><br />\n<span class=\"example-io\">[null, true, true, false, true, true, [2, 5, 90], true, 1] </span></p>\n\n<p><strong>Explanation</strong></p>\nRouter router = new Router(3); // Initialize Router with memoryLimit of 3.<br />\nrouter.addPacket(1, 4, 90); // Packet is added. Return True.<br />\nrouter.addPacket(2, 5, 90); // Packet is added. Return True.<br />\nrouter.addPacket(1, 4, 90); // This is a duplicate packet. Return False.<br />\nrouter.addPacket(3, 5, 95); // Packet is added. Return True<br />\nrouter.addPacket(4, 5, 105); // Packet is added, <code>[1, 4, 90]</code> is removed as number of packets exceeds memoryLimit. Return True.<br />\nrouter.forwardPacket(); // Return <code>[2, 5, 90]</code> and remove it from router.<br />\nrouter.addPacket(5, 2, 110); // Packet is added. Return True.<br />\nrouter.getCount(5, 100, 110); // The only packet with destination 5 and timestamp in the inclusive range <code>[100, 110]</code> is <code>[4, 5, 105]</code>. Return 1.</div>\n\n<p><strong class=\"example\">Example 2:</strong></p>\n\n<div class=\"example-block\">\n<p><strong>Input:</strong><br />\n<span class=\"example-io\">[&quot;Router&quot;, &quot;addPacket&quot;, &quot;forwardPacket&quot;, &quot;forwardPacket&quot;]<br />\n[[2], [7, 4, 90], [], []]</span></p>\n\n<p><strong>Output:</strong><br />\n<span class=\"example-io\">[null, true, [7, 4, 90], []] </span></p>\n\n<p><strong>Explanation</strong></p>\nRouter router = new Router(2); // Initialize <code>Router</code> with <code>memoryLimit</code> of 2.<br />\nrouter.addPacket(7, 4, 90); // Return True.<br />\nrouter.forwardPacket(); // Return <code>[7, 4, 90]</code>.<br />\nrouter.forwardPacket(); // There are no packets left, return <code>[]</code>.</div>\n\n<p>&nbsp;</p>\n<p><strong>Constraints:</strong></p>\n\n<ul>\n\t<li><code>2 &lt;= memoryLimit &lt;= 10<sup>5</sup></code></li>\n\t<li><code>1 &lt;= source, destination &lt;= 2 * 10<sup>5</sup></code></li>\n\t<li><code>1 &lt;= timestamp &lt;= 10<sup>9</sup></code></li>\n\t<li><code>1 &lt;= startTime &lt;= endTime &lt;= 10<sup>9</sup></code></li>\n\t<li>At most <code>10<sup>5</sup></code> calls will be made to <code>addPacket</code>, <code>forwardPacket</code>, and <code>getCount</code> methods altogether.</li>\n\t<li>queries for <code>addPacket</code> will be made in non-decreasing order of <code>timestamp</code>.</li>\n</ul>\n",
  "content_markdown": "Design a data structure that can efficiently manage data packets in a network router. Each data packet consists of the following attributes:\n\n  * `source`: A unique identifier for the machine that generated the packet.\n  * `destination`: A unique identifier for the target machine.\n  * `timestamp`: The time at which the packet arrived at the router.\n\n\n\nImplement the `Router` class:\n\n`Router(int memoryLimit)`: Initializes the Router object with a fixed memory limit.\n\n  * `memoryLimit` is the **maximum** number of packets the router can store at any given time.\n  * If adding a new packet would exceed this limit, the **oldest** packet must be removed to free up space.\n\n\n\n`bool addPacket(int source, int destination, int timestamp)`: Adds a packet with the given attributes to the router.\n\n  * A packet is considered a duplicate if another packet with the same `source`, `destination`, and `timestamp` already exists in the router.\n  * Return `true` if the packet is successfully added (i.e., it is not a duplicate); otherwise return `false`.\n\n\n\n`int[] forwardPacket()`: Forwards the next packet in FIFO (First In First Out) order.\n\n  * Remove the packet from storage.\n  * Return the packet as an array `[source, destination, timestamp]`.\n  * If there are no packets to forward, return an empty array.\n\n\n\n`int getCount(int destination, int startTime, int endTime)`:\n\n  * Returns the number of packets currently stored in the router (i.e., not yet forwarded) that have the specified destination and have timestamps in the inclusive range `[startTime, endTime]`.\n\n\n\n**Note** that queries for `addPacket` will be made in non-decreasing order of `timestamp`.\n\n \n\n**Example 1:**\n\n**Input:**  \n[\"Router\", \"addPacket\", \"addPacket\", \"addPacket\", \"addPacket\", \"addPacket\", \"forwardPacket\", \"addPacket\", \"getCount\"]  \n[[3], [1, 4, 90], [2, 5, 90], [1, 4, 90], [3, 5, 95], [4, 5, 105], [], [5, 2, 110], [5, 100, 110]]\n\n**Output:**  \n[null, true, true, false, true, true, [2, 5, 90], true, 1] \n\n**Explanation**\n\nRouter router = new Router(3); // Initialize Router with memoryLimit of 3.  \nrouter.addPacket(1, 4, 90); // Packet is added. Return True.  \nrouter.addPacket(2, 5, 90); // Packet is added. Return True.  \nrouter.addPacket(1, 4, 90); // This is a duplicate packet. Return False.  \nrouter.addPacket(3, 5, 95); // Packet is added. Return True  \nrouter.addPacket(4, 5, 105); // Packet is added, `[1, 4, 90]` is removed as number of packets exceeds memoryLimit. Return True.  \nrouter.forwardPacket(); // Return `[2, 5, 90]` and remove it from router.  \nrouter.addPacket(5, 2, 110); // Packet is added. Return True.  \nrouter.getCount(5, 100, 110); // The only packet with destination 5 and timestamp in the inclusive range `[100, 110]` is `[4, 5, 105]`. Return 1.\n\n**Example 2:**\n\n**Input:**  \n[\"Router\", \"addPacket\", \"forwardPacket\", \"forwardPacket\"]  \n[[2], [7, 4, 90], [], []]\n\n**Output:**  \n[null, true, [7, 4, 90], []] \n\n**Explanation**\n\nRouter router = new Router(2); // Initialize `Router` with `memoryLimit` of 2.  \nrouter.addPacket(7, 4, 90); // Return True.  \nrouter.forwardPacket(); // Return `[7, 4, 90]`.  \nrouter.forwardPacket(); // There are no packets left, return `[]`.\n\n \n\n**Constraints:**\n\n  * `2 <= memoryLimit <= 105`\n  * `1 <= source, destination <= 2 * 105`\n  * `1 <= timestamp <= 109`\n  * `1 <= startTime <= endTime <= 109`\n  * At most `105` calls will be made to `addPacket`, `forwardPacket`, and `getCount` methods altogether.\n  * queries for `addPacket` will be made in non-decreasing order of `timestamp`.",
  "question": "Design a data structure that can efficiently manage data packets in a network router. Each data packet consists of the following attributes:\n\n  * `source`: A unique identifier for the machine that generated the packet.\n  * `destination`: A unique identifier for the target machine.\n  * `timestamp`: The time at which the packet arrived at the router.\n\n\n\nImplement the `Router` class:\n\n`Router(int memoryLimit)`: Initializes the Router object with a fixed memory limit.\n\n  * `memoryLimit` is the **maximum** number of packets the router can store at any given time.\n  * If adding a new packet would exceed this limit, the **oldest** packet must be removed to free up space.\n\n\n\n`bool addPacket(int source, int destination, int timestamp)`: Adds a packet with the given attributes to the router.\n\n  * A packet is considered a duplicate if another packet with the same `source`, `destination`, and `timestamp` already exists in the router.\n  * Return `true` if the packet is successfully added (i.e., it is not a duplicate); otherwise return `false`.\n\n\n\n`int[] forwardPacket()`: Forwards the next packet in FIFO (First In First Out) order.\n\n  * Remove the packet from storage.\n  * Return the packet as an array `[source, destination, timestamp]`.\n  * If there are no packets to forward, return an empty array.\n\n\n\n`int getCount(int destination, int startTime, int endTime)`:\n\n  * Returns the number of packets currently stored in the router (i.e., not yet forwarded) that have the specified destination and have timestamps in the inclusive range `[startTime, endTime]`.\n\n\n\n**Note** that queries for `addPacket` will be made in non-decreasing order of `timestamp`.",
  "examples": "**Example 1:**\n\n**Input:**  \n[\"Router\", \"addPacket\", \"addPacket\", \"addPacket\", \"addPacket\", \"addPacket\", \"forwardPacket\", \"addPacket\", \"getCount\"]  \n[[3], [1, 4, 90], [2, 5, 90], [1, 4, 90], [3, 5, 95], [4, 5, 105], [], [5, 2, 110], [5, 100, 110]]\n\n**Output:**  \n[null, true, true, false, true, true, [2, 5, 90], true, 1] \n\n**Explanation**\n\nRouter router = new Router(3); // Initialize Router with memoryLimit of 3.  \nrouter.addPacket(1, 4, 90); // Packet is added. Return True.  \nrouter.addPacket(2, 5, 90); // Packet is added. Return True.  \nrouter.addPacket(1, 4, 90); // This is a duplicate packet. Return False.  \nrouter.addPacket(3, 5, 95); // Packet is added. Return True  \nrouter.addPacket(4, 5, 105); // Packet is added, `[1, 4, 90]` is removed as number of packets exceeds memoryLimit. Return True.  \nrouter.forwardPacket(); // Return `[2, 5, 90]` and remove it from router.  \nrouter.addPacket(5, 2, 110); // Packet is added. Return True.  \nrouter.getCount(5, 100, 110); // The only packet with destination 5 and timestamp in the inclusive range `[100, 110]` is `[4, 5, 105]`. Return 1.\n\n**Example 2:**\n\n**Input:**  \n[\"Router\", \"addPacket\", \"forwardPacket\", \"forwardPacket\"]  \n[[2], [7, 4, 90], [], []]\n\n**Output:**  \n[null, true, [7, 4, 90], []] \n\n**Explanation**\n\nRouter router = new Router(2); // Initialize `Router` with `memoryLimit` of 2.  \nrouter.addPacket(7, 4, 90); // Return True.  \nrouter.forwardPacket(); // Return `[7, 4, 90]`.  \nrouter.forwardPacket(); // There are no packets left, return `[]`.",
  "constraints": "**Constraints:**\n\n  * `2 <= memoryLimit <= 105`\n  * `1 <= source, destination <= 2 * 105`\n  * `1 <= timestamp <= 109`\n  * `1 <= startTime <= endTime <= 109`\n  * At most `105` calls will be made to `addPacket`, `forwardPacket`, and `getCount` methods altogether.\n  * queries for `addPacket` will be made in non-decreasing order of `timestamp`.",
  "topics": ["Array", "Hash Table", "Binary Search", "Design", "Queue", "Ordered Set"],
  "total_accepted": 88803,
  "total_submissions": 226828,
  "acceptance_rate": "39.1%",
  "similar_questions": [],
  "hints": [
    "A deque can simulate the adding and forwarding of packets efficiently.",
    "Use binary search for counting packets within a timestamp range."
  ]
}
